<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.healtharchive.ca/roadmaps/implemented/2025-12-24-6-phase-upgrade-roadmap-2025/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>HealthArchive 6-Phase Upgrade Roadmap (2025; archived 2025-12-24) - HealthArchive</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="HealthArchive 6-Phase Upgrade Roadmap (2025; archived 2025-12-24) - HealthArchive"><meta property=og:image content=https://docs.healtharchive.ca/assets/images/social/roadmaps/implemented/2025-12-24-6-phase-upgrade-roadmap-2025.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://docs.healtharchive.ca/roadmaps/implemented/2025-12-24-6-phase-upgrade-roadmap-2025/ property=og:url><meta property=twitter:card content=summary_large_image><meta property=twitter:title content="HealthArchive 6-Phase Upgrade Roadmap (2025; archived 2025-12-24) - HealthArchive"><meta property=twitter:image content=https://docs.healtharchive.ca/assets/images/social/roadmaps/implemented/2025-12-24-6-phase-upgrade-roadmap-2025.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#healtharchive-6-phase-upgrade-roadmap-2025-archived-2025-12-24 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=HealthArchive class="md-header__button md-logo" aria-label=HealthArchive data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HealthArchive </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> HealthArchive 6-Phase Upgrade Roadmap (2025; archived 2025-12-24) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jerdaw/healtharchive-backend title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> jerdaw/healtharchive-backend </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../quickstart/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../tutorials/first-contribution/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../operations/ class=md-tabs__link> How-To Guides </a> </li> <li class=md-tabs__item> <a href=../../../api/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../../documentation-guidelines/ class=md-tabs__link> Explanation </a> </li> <li class=md-tabs__item> <a href=../../ class=md-tabs__link> Planning & Roadmaps </a> </li> <li class=md-tabs__item> <a href=../../../project/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=HealthArchive class="md-nav__button md-logo" aria-label=HealthArchive data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> HealthArchive </label> <div class=md-nav__source> <a href=https://github.com/jerdaw/healtharchive-backend title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> jerdaw/healtharchive-backend </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../../project/ class=md-nav__link> <span class=md-ellipsis> Project Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Choose Your Path </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Choose Your Path </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/operator-responsibilities/ class=md-nav__link> <span class=md-ellipsis> I'm an Operator </span> </a> </li> <li class=md-nav__item> <a href=../../../development/dev-environment-setup/ class=md-nav__link> <span class=md-ellipsis> I'm a Developer </span> </a> </li> <li class=md-nav__item> <a href=../../../api-consumer-guide/ class=md-nav__link> <span class=md-ellipsis> I'm an API Consumer </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/first-contribution/ class=md-nav__link> <span class=md-ellipsis> Your First Contribution </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/architecture-walkthrough/ class=md-nav__link> <span class=md-ellipsis> Architecture Walkthrough </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/debug-crawl/ class=md-nav__link> <span class=md-ellipsis> Debugging a Failed Crawl </span> </a> </li> <li class=md-nav__item> <a href=../../../development/live-testing/ class=md-nav__link> <span class=md-ellipsis> Local Development Workflow </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> How-To Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> How-To Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <div class="md-nav__link md-nav__container"> <a href=../../../operations/ class="md-nav__link "> <span class=md-ellipsis> Operations </span> </a> <label class="md-nav__link " for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_2> <label class=md-nav__link for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class=md-ellipsis> Core Playbooks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> Core Playbooks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/operator-responsibilities/ class=md-nav__link> <span class=md-ellipsis> I'm an Operator </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/deploy-and-verify/ class=md-nav__link> <span class=md-ellipsis> Deploy & Verify </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/incident-response/ class=md-nav__link> <span class=md-ellipsis> Incident Response </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/escalation-procedures/ class=md-nav__link> <span class=md-ellipsis> Escalation Procedures </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3 id=__nav_4_1_3_label tabindex=0> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/check-logs-api-worker-access.md class=md-nav__link> <span class=md-ellipsis> Check Logs </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/verify-search-index-coverage.md class=md-nav__link> <span class=md-ellipsis> Verify Search Index </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/check-warc-tiering-status.md class=md-nav__link> <span class=md-ellipsis> Monitor WARC Tiering </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/check-disk-space.md class=md-nav__link> <span class=md-ellipsis> Check Disk Space </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/check-healthchecks-io-status.md class=md-nav__link> <span class=md-ellipsis> Check Healthchecks </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/check-tailscale-connectivity.md class=md-nav__link> <span class=md-ellipsis> Check Tailscale </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/review-prometheus-metrics.md class=md-nav__link> <span class=md-ellipsis> Review Metrics </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_4> <label class=md-nav__link for=__nav_4_1_4 id=__nav_4_1_4_label tabindex=0> <span class=md-ellipsis> Crawls & Archives </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_4> <span class="md-nav__icon md-icon"></span> Crawls & Archives </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/validate-export-integrity.md class=md-nav__link> <span class=md-ellipsis> Validate Export Integrity </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/reconcile-replay-collection.md class=md-nav__link> <span class=md-ellipsis> Reconcile Replay Collection </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/reindex-job-warcs.md class=md-nav__link> <span class=md-ellipsis> Reindex Job WARCs </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/trigger-manual-crawl.md class=md-nav__link> <span class=md-ellipsis> Trigger Manual Crawl </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_5> <label class=md-nav__link for=__nav_4_1_5 id=__nav_4_1_5_label tabindex=0> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_5> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/check-tailnet-storage-quota.md class=md-nav__link> <span class=md-ellipsis> Check Storage Quotas </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/manage-warc-cleanup.md class=md-nav__link> <span class=md-ellipsis> Manage WARC Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/verify-warc-tier-distribution.md class=md-nav__link> <span class=md-ellipsis> Verify WARC Tier Distribution </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_6> <label class=md-nav__link for=__nav_4_1_6 id=__nav_4_1_6_label tabindex=0> <span class=md-ellipsis> Validation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_6> <span class="md-nav__icon md-icon"></span> Validation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/restore-test/ class=md-nav__link> <span class=md-ellipsis> Restore Test </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/verify-coverage.md class=md-nav__link> <span class=md-ellipsis> Verify Coverage </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/dataset-release/ class=md-nav__link> <span class=md-ellipsis> Dataset Release </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/baseline-drift-check.md class=md-nav__link> <span class=md-ellipsis> Baseline Drift Check </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/verify-ops-automation.md class=md-nav__link> <span class=md-ellipsis> Verify Ops Automation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1_7> <label class=md-nav__link for=__nav_4_1_7 id=__nav_4_1_7_label tabindex=0> <span class=md-ellipsis> External </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_7> <span class="md-nav__icon md-icon"></span> External </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/playbooks/adoption-signals/ class=md-nav__link> <span class=md-ellipsis> Adoption Signals </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/write-changelog-entry.md class=md-nav__link> <span class=md-ellipsis> Write Changelog Entry </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/playbooks/handle-user-issue-report.md class=md-nav__link> <span class=md-ellipsis> Handle User Issue Report </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../operations/service-levels/ class=md-nav__link> <span class=md-ellipsis> Service Levels </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/dev-environment-setup/ class=md-nav__link> <span class=md-ellipsis> I'm a Developer </span> </a> </li> <li class=md-nav__item> <a href=../../../development/testing-guidelines/ class=md-nav__link> <span class=md-ellipsis> Run Tests </span> </a> </li> <li class=md-nav__item> <a href=../../../development/playbooks/database-migrations.md class=md-nav__link> <span class=md-ellipsis> Making Database Changes </span> </a> </li> <li class=md-nav__item> <a href=../../../development/playbooks/add-cli-command.md class=md-nav__link> <span class=md-ellipsis> Adding New CLI Commands </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__container"> <a href=../../../deployment/systemd/ class="md-nav__link "> <span class=md-ellipsis> Deployment </span> </a> <label class="md-nav__link " for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deployment/production-single-vps/ class=md-nav__link> <span class=md-ellipsis> Production Setup </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/environments-and-configuration/ class=md-nav__link> <span class=md-ellipsis> Configure Environments </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/hosting-and-live-server-to-dos/ class=md-nav__link> <span class=md-ellipsis> Deploy to Production </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/production-rollout-checklist/ class=md-nav__link> <span class=md-ellipsis> Rollout Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/replay-service-pywb/ class=md-nav__link> <span class=md-ellipsis> Setup Replay Service </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/search-rollout/ class=md-nav__link> <span class=md-ellipsis> Enable Search V2 </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/pages-table-rollout/ class=md-nav__link> <span class=md-ellipsis> Setup Pages Table </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/disaster-recovery/ class=md-nav__link> <span class=md-ellipsis> Disaster Recovery </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../../datasets-external/ class="md-nav__link "> <span class=md-ellipsis> Reference </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../api/ class=md-nav__link> <span class=md-ellipsis> API Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../../architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/data-model/ class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/archive-tool/ class=md-nav__link> <span class=md-ellipsis> Archive Tool </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/cli-commands/ class=md-nav__link> <span class=md-ellipsis> CLI Commands </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_6> <div class="md-nav__link md-nav__container"> <a href=../../../deployment/systemd/ class="md-nav__link "> <span class=md-ellipsis> Configuration </span> </a> <label class="md-nav__link " for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deployment/environments-and-configuration/ class=md-nav__link> <span class=md-ellipsis> Configure Environments </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/thresholds-and-tuning/ class=md-nav__link> <span class=md-ellipsis> Thresholds & Tuning </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_8> <div class="md-nav__link md-nav__container"> <a href=../../../frontend-external/ class="md-nav__link "> <span class=md-ellipsis> Frontend </span> </a> <label class="md-nav__link " for=__nav_5_8 id=__nav_5_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../frontend-external/i18n/ class=md-nav__link> <span class=md-ellipsis> I18n Guide </span> </a> </li> <li class=md-nav__item> <a href=../../../frontend-external/implementation-guide/ class=md-nav__link> <span class=md-ellipsis> Implementation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../../decisions/ class="md-nav__link "> <span class=md-ellipsis> Explanation </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Explanation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../documentation-guidelines/ class=md-nav__link> <span class=md-ellipsis> Documentation Guidelines </span> </a> </li> <li class=md-nav__item> <a href=../../../documentation-process-audit/ class=md-nav__link> <span class=md-ellipsis> Documentation Audit </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/ops-cadence-checklist/ class=md-nav__link> <span class=md-ellipsis> Ops Cadence </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/monitoring-and-ci-checklist/ class=md-nav__link> <span class=md-ellipsis> Monitoring Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/risk-register/ class=md-nav__link> <span class=md-ellipsis> Risk Register </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/baseline-drift/ class=md-nav__link> <span class=md-ellipsis> Baseline Drift </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/data-handling-and-retention.md class=md-nav__link> <span class=md-ellipsis> Data Handling </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/automation.md class=md-nav__link> <span class=md-ellipsis> Automation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_10> <div class="md-nav__link md-nav__container"> <a href=../../../operations/incidents/ class="md-nav__link "> <span class=md-ellipsis> Incident Management </span> </a> <label class="md-nav__link " for=__nav_6_10 id=__nav_6_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10> <span class="md-nav__icon md-icon"></span> Incident Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/incidents/severity/ class=md-nav__link> <span class=md-ellipsis> Severity Guide </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_10_3> <label class=md-nav__link for=__nav_6_10_3 id=__nav_6_10_3_label tabindex=0> <span class=md-ellipsis> Post-Mortems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_10_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10_3> <span class="md-nav__icon md-icon"></span> Post-Mortems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/incidents/2026-01-08-storage-hotpath-sshfs-stale-mount/ class=md-nav__link> <span class=md-ellipsis> Storage Hotpath (2026-01-08) </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/incidents/2026-01-09-annual-crawl-hc-job-stalled/ class=md-nav__link> <span class=md-ellipsis> Annual Crawl Stalled (2026-01-09) </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/incidents/2026-01-09-annual-crawl-phac-output-dir-permission-denied/ class=md-nav__link> <span class=md-ellipsis> PHAC Permission Denied (2026-01-09) </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/incidents/2026-01-16-replay-smoke-503-and-warctieringfailed/ class=md-nav__link> <span class=md-ellipsis> Replay Smoke 503 (2026-01-16) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Planning & Roadmaps </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Planning & Roadmaps </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Active Investigations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Active Investigations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../2026-02-01-disk-usage-investigation/ class=md-nav__link> <span class=md-ellipsis> Disk Usage Mystery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> <span class=md-ellipsis> Future Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../../../roadmap-process/ class=md-nav__link> <span class=md-ellipsis> Roadmap Process </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_5> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Implemented Plans </span> </a> <label class="md-nav__link " for=__nav_7_5 id=__nav_7_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_5_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> Implemented Plans </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../2026-02-01-operational-resilience-improvements/ class=md-nav__link> <span class=md-ellipsis> Operational Resilience (2026-02-01) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../../_templates/ class="md-nav__link "> <span class=md-ellipsis> About </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../project/ class=md-nav__link> <span class=md-ellipsis> Project Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../CONTRIBUTING.md class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../../meta/documentation-health/ class=md-nav__link> <span class=md-ellipsis> Documentation Health </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=healtharchive-6-phase-upgrade-roadmap-2025-archived-2025-12-24>HealthArchive 6-Phase Upgrade Roadmap (2025; archived 2025-12-24)</h1> <p>This is the <strong>historical roadmap</strong> for the 6-phase upgrade program (Phases 0–6).</p> <p>It is not the current ops checklist. For live state and remaining ops tasks, see:</p> <ul> <li><code>docs/operations/healtharchive-ops-roadmap.md</code></li> <li><code>docs/operations/README.md</code></li> </ul> <p>Status: <strong>historical reference</strong>. If anything in this document conflicts with ops docs, the ops docs win.</p> <h2 id=how-to-use-this-document-for-a-future-agent>How To Use This Document (for a future agent)</h2> <p>1) <strong>Confirm current state first (don’t guess).</strong> This repo is split across: - <code>healtharchive-frontend/</code> (Next.js 16 UI on Vercel) - <code>healtharchive-backend/</code> (FastAPI + worker + indexing + in-tree crawler) - <code>healtharchive-backend/docs/deployment/environments-and-configuration.md</code> (cross-repo env wiring; canonical)</p> <p>2) <strong>Read the canonical docs (high signal).</strong> - Cross-repo wiring: <code>healtharchive-backend/docs/deployment/environments-and-configuration.md</code> - Backend architecture: <code>healtharchive-backend/docs/architecture.md</code> - Backend production runbook: <code>healtharchive-backend/docs/deployment/production-single-vps.md</code> - Annual campaign scope/policy: <code>healtharchive-backend/docs/operations/annual-campaign.md</code> - Replay runbook: <code>healtharchive-backend/docs/deployment/replay-service-pywb.md</code> - Replay/preview automation design: <code>healtharchive-backend/docs/operations/replay-and-preview-automation-plan.md</code> - Frontend implementation guide: <code>healtharchive-frontend/docs/implementation-guide.md</code> - Frontend deployment verification: <code>healtharchive-frontend/docs/deployment/verification.md</code></p> <p>3) <strong>Work in small increments.</strong> Each deliverable should be implementable as a small PR: - Don’t mix governance copywork with major backend refactors in one change. - Keep checks passing (backend <code>make check</code>, frontend <code>npm run check</code>).</p> <p>4) <strong>Non-negotiable safety posture (do not weaken).</strong> - HealthArchive is an archive + provenance tool, <strong>not</strong> a guidance provider. - Never imply affiliation with government sources. - Avoid features that produce medical interpretation (especially AI summaries). - Preserve the existing browser hardening: CSP/security headers, iframe sandboxing, strict CORS, admin token gating.</p> <h2 id=current-architecture-as-implemented>Current Architecture (as implemented)</h2> <h3 id=components>Components</h3> <ul> <li><strong>Frontend:</strong> <code>healtharchive-frontend/</code> (Next.js 16 App Router + TypeScript, Tailwind + <code>.ha-*</code> design system)</li> <li>Routes: <code>/</code>, <code>/archive</code>, <code>/archive/browse-by-source</code>, <code>/snapshot/[id]</code>, <code>/browse/[id]</code>, <code>/methods</code>, <code>/researchers</code>, <code>/about</code>, <code>/contact</code></li> <li>Offline fallback: demo dataset + static HTML stubs under <code>healtharchive-frontend/public/demo-archive/**</code> (used when API unreachable / CORS blocked)</li> <li><strong>Backend:</strong> <code>healtharchive-backend/</code> (FastAPI + SQLAlchemy + Alembic)</li> <li>Public API endpoints used by the frontend:<ul> <li><code>GET /api/health</code>, <code>GET /api/stats</code>, <code>GET /api/sources</code>, <code>GET /api/search</code>, <code>GET /api/snapshot/{id}</code>, <code>GET /api/snapshots/raw/{id}</code></li> <li>Replay support: <code>GET /api/sources/{source}/editions</code>, <code>GET /api/replay/resolve</code></li> <li>Preview images (optional): <code>GET /api/sources/{source}/preview?jobId=...</code></li> </ul> </li> <li>Admin/ops endpoints (must remain off-limits for public UI): <code>/api/admin/**</code>, <code>/metrics</code></li> <li><strong>Crawler/orchestrator:</strong> <code>healtharchive-backend/src/archive_tool/</code></li> <li>Drives Docker + Zimit to generate WARCs and job artifacts in a resumable pipeline.</li> <li><strong>Worker:</strong> <code>healtharchive-backend/src/ha_backend/worker/</code></li> <li>Runs queued jobs end-to-end (crawl → index), with retries.</li> <li><strong>Optional replay service:</strong> pywb behind Caddy at <code>https://replay.healtharchive.ca</code></li> <li>Backend generates <code>browseUrl</code> values when <code>HEALTHARCHIVE_REPLAY_BASE_URL</code> is configured.</li> </ul> <h3 id=deployment-reality-current-posture>Deployment reality (current posture)</h3> <ul> <li><strong>Frontend:</strong> Vercel (<code>https://healtharchive.ca</code>, <code>https://www.healtharchive.ca</code>, plus <code>https://healtharchive.vercel.app</code>)</li> <li><strong>Backend API:</strong> Single production API at <code>https://api.healtharchive.ca</code> (used for both Preview and Production), with a strict CORS allowlist.</li> <li><strong>Single VPS model:</strong> Postgres + API + worker + storage + Caddy on one server (see <code>healtharchive-backend/docs/deployment/production-single-vps.md</code>).</li> </ul> <h3 id=key-constraints-that-affect-implementation-choices>Key constraints that affect implementation choices</h3> <ul> <li><strong>CSP/security headers:</strong> Frontend sets a restrictive CSP in report-only mode (<code>healtharchive-frontend/next.config.ts</code>).</li> <li>This will constrain “drop-in” third-party scripts for analytics/forms unless explicitly allowed.</li> <li><strong>Strict CORS:</strong> Backend allows only specific frontend origins (intentionally). Branch preview URLs may fall back to demo mode by design.</li> <li><strong>Replay depends on WARCs:</strong> Deleting WARCs breaks replay. Cleanup is intentionally cautious.</li> <li><strong>Single VPS capacity:</strong> Heavy background work (diff generation, replay indexing, preview rendering) must be controlled so it doesn’t harm API responsiveness.</li> </ul> <h2 id=terminology-shared-language>Terminology (shared language)</h2> <ul> <li><strong>Source:</strong> A logical origin like “Health Canada” (<code>hc</code>) or “PHAC” (<code>phac</code>).</li> <li><strong>ArchiveJob (job):</strong> A single crawl run with a config and output directory; after indexing, it becomes an “edition”.</li> <li><strong>Edition:</strong> A user-facing “backup” of a source, typically <code>job-&lt;id&gt;</code> (used for replay browsing + edition switching).</li> <li><strong>Snapshot:</strong> A single captured page instance (URL + timestamp + metadata) extracted from WARCs and stored in the DB.</li> <li><strong>Page / page group:</strong> A canonical grouping of multiple snapshots for the “same page” across time, typically keyed by <code>normalized_url_group</code> (backend supports <code>view=pages</code>).</li> <li><strong>Raw HTML replay:</strong> <code>GET /api/snapshots/raw/{id}</code> reconstructs HTML from the WARC for embedding in the frontend.</li> <li><strong>Full-fidelity replay:</strong> pywb replay of the same content (CSS/JS/assets when captured), embedded via <code>browseUrl</code>.</li> </ul> <h2 id=roadmap-summary-high-level>Roadmap Summary (High-Level)</h2> <p><strong>Ground Truth From The Current Repos (what’s already “upgraded”)</strong></p> <ul> <li>Strong, repeated non-government / non-advice framing already exists in UI copy, especially in the footer and snapshot viewer (<code>healtharchive-frontend/src/components/layout/Footer.tsx:8</code>, <code>healtharchive-frontend/src/app/snapshot/[id]/page.tsx:192</code>) and a “What this site is/isn’t” block is already on the homepage (<code>healtharchive-frontend/src/app/page.tsx:191</code>).</li> <li>The homepage already surfaces live archive metrics via the backend <code>/api/stats</code> (with an offline fallback), which is a big “service maturity” signal (<code>healtharchive-frontend/src/app/page.tsx:13</code>).</li> <li>Researcher-oriented copy already includes citation guidance and explicitly calls out “compare/timeline/exports” as planned capabilities (<code>healtharchive-frontend/src/app/researchers/page.tsx:65</code>).</li> <li>Backend already has: robust search semantics, “pages vs snapshots” view, optional <code>pages</code> table fast path, replay integration (pywb), per-source “editions” for switching backups, and ops runbooks + systemd templates for annual scheduling and verification (<code>healtharchive-backend/docs/architecture.md:22</code>, <code>healtharchive-backend/docs/deployment/pages-table-rollout.md:1</code>, <code>healtharchive-backend/docs/deployment/systemd/README.md:1</code>, <code>healtharchive-backend/docs/operations/annual-campaign.md:1</code>).</li> <li>Frontend security posture is already deliberate (security headers + CSP in report-only) and will constrain how you add third-party analytics/forms unless you plan it (<code>healtharchive-frontend/next.config.ts:3</code>).</li> </ul> <p>Below is a revised, sequential upgrade plan that assumes those realities and avoids duplicating what you already have.</p> <hr> <h2 id=phase-0-tighten-narrative-reduce-copy-drift-high-roi-mostly-editing>Phase 0 — Tighten Narrative + Reduce Copy Drift (high ROI, mostly editing)</h2> <p><strong>Goal:</strong> You already have good messaging; this phase makes it <em>consistent, “research-grade,” and accurate to what’s actually deployed</em>.</p> <p><strong>0.1 Standardize the mission statement (everywhere it matters)</strong></p> <ul> <li>Unify language across: homepage hero, About, Methods, Researchers, metadata description, and any future Governance page.</li> <li>Keep the mission short and “verifiable”: <em>time-stamped snapshots + auditable changes + citation</em>, not broad claims.</li> </ul> <p><strong>Suggested tone (aligned with current copy but sharper):</strong></p> <ul> <li>“HealthArchive.ca preserves time-stamped snapshots of selected Canadian public health web pages so changes remain auditable and citable.”</li> <li>“This is not medical advice and not a substitute for current official guidance.”</li> </ul> <p><strong>0.2 Make the “archived, not current” message unavoidable on workflow pages</strong> You already do this well on the homepage and snapshot detail; bring the same clarity to:</p> <ul> <li><code>/archive</code> (search is where casual users land)</li> <li><code>/browse/[id]</code> (high-risk page: looks like you’re “showing a site”)</li> </ul> <p>Deliverable concept (no implementation detail): one short, consistent block that appears on Home + Archive + Snapshot + Browse, tuned per context:</p> <ul> <li>Archive: “Search historical snapshots. Always verify against the official site for current guidance.”</li> <li>Browse: “You’re browsing an archived capture from <date time>. Links may not reflect current guidance.”</li> </ul> <p><strong>0.3 Update Methods text to reflect <em>what is already real</em> (reduce “future tense”)</strong> Right now Methods reads partially like a conceptual design document (<code>healtharchive-frontend/src/app/methods/page.tsx:34</code>). Your backend + production runbook indicates this is already materially implemented.</p> <ul> <li>Shift language from “would / intended” → “does / currently,” while keeping the “in development” caveats.</li> <li>Bring in (high-level) the annual edition concept that already exists in ops docs, without exposing infrastructure details.</li> </ul> <p><strong>0.4 Choose (and explicitly state) primary audiences</strong> Homepage currently lists clinicians + researchers/journalists + public (<code>healtharchive-frontend/src/app/page.tsx:104</code>). That’s fine, but for risk posture you may want:</p> <ul> <li>Primary: researchers/journalists/educators</li> <li>Secondary: clinicians/public (with stronger guardrails) Deliverable: a subtle re-weighting of copy (not removing audiences, just clarifying intended use).</li> </ul> <p><strong>Definition of done (Phase 0)</strong></p> <ul> <li>A new visitor landing on <code>/archive</code> or <code>/browse/[id]</code> cannot miss “archived, not current guidance; not medical advice; independent project.”</li> <li>Methods/About/Researchers copy matches the actual deployed architecture and policies (annual editions, limited scope, optional replay).</li> </ul> <hr> <h2 id=phase-1-public-governance-layer-abs-critical-mostly-writing-lightweight-process>Phase 1 — Public Governance Layer (ABS-critical; mostly writing + lightweight process)</h2> <p><strong>Goal:</strong> Convert your already-solid engineering into “public-interest infrastructure” with clear rules.</p> <p><strong>1.1 Publish a Governance section (public-facing)</strong> You already have deep internal ops docs; this phase turns the right parts into a stable, public policy surface. Include (plain language, not legalese):</p> <ul> <li>Mission + scope boundaries (what you archive, what you intentionally don’t)</li> <li>Source inclusion criteria (why a source is in/out)</li> <li>Provenance commitments (what metadata you guarantee; how you label captures)</li> <li>Corrections policy (what counts as a “correction,” expected response time)</li> <li>Takedown/opt-out policy (including how you handle edge cases and third-party content)</li> <li>Non-affiliation / non-authoritativeness statement (already strong in footer; reference it consistently)</li> </ul> <p><strong>1.2 Terms + Privacy pages</strong> You currently have no explicit terms/privacy pages in the frontend route structure. Keep them short and specific:</p> <ul> <li>“No accounts; no patient info collected”</li> <li>What telemetry exists (today it appears “none”; if you add analytics later, this page becomes the contract)</li> <li>Content use posture (research/education; not medical advice; link to official sources)</li> </ul> <p><strong>1.3 Public Changelog</strong> Your repos will naturally evolve; a changelog makes “maintenance over time” legible.</p> <ul> <li>Monthly cadence is enough.</li> <li>Content examples: “Added source CIHR to annual scope,” “Improved replay edition switching,” “Search improvements,” “Incident resolved.”</li> </ul> <p><strong>1.4 “Report an issue” intake that’s more structured than “email us”</strong> Contact already invites issue reports (<code>healtharchive-frontend/src/app/contact/page.tsx:32</code>), but the process isn’t explicit. Deliverable concept:</p> <ul> <li>A clearly labeled “Report an issue” entry point (footer and/or viewer UI).</li> <li>A simple set of categories + what happens next + response expectations.</li> </ul> <p><strong>1.5 Advisory circle (process, not code)</strong> Your internal documentation quality is already high; an advisory circle makes it externally defensible.</p> <ul> <li>Aim for 2–4 people; publish a charter and cadence.</li> <li>Keep meeting notes minimal and policy-focused (scope, risk posture, corrections).</li> </ul> <p><strong>Definition of done (Phase 1)</strong></p> <ul> <li>The site has publicly visible: Governance, Terms, Privacy, Changelog, Report-an-issue flow.</li> <li>A neutral reviewer can understand your rules and safety posture in under 2 minutes.</li> </ul> <h3 id=phase-1-implementation-plan-detailed-sub-phases>Phase 1 Implementation Plan (Detailed; sub-phases)</h3> <p>This phase is deliberately <strong>mostly writing + lightweight UI + lightweight backend plumbing</strong>. The goal is not bureaucracy — it’s to make HealthArchive legible, defensible, and easy to verify as “public-interest infrastructure”.</p> <p><strong>Design principles (Phase 1)</strong></p> <ul> <li><strong>Plain language over legalese.</strong> You are defining procedures and expectations, not trying to replace a lawyer.</li> <li><strong>Minimal collection.</strong> No accounts, no tracking IDs tied to people, no sensitive submissions. Default to “do not submit personal/health information.”</li> <li><strong>Consistency.</strong> The same core “this is an archive / not guidance / not medical advice” language should appear across the new pages, reusing frontend’s canonical copy source (<code>healtharchive-frontend/src/lib/siteCopy.ts</code>).</li> <li><strong>Operational reality.</strong> Policies should match how you actually operate today (annual editions, constrained scope, optional replay).</li> <li><strong>Fail safe.</strong> When the API is unreachable, reporting should still work (e.g., mailto fallback).</li> </ul> <h4 id=sub-phase-1a-inventory-decisions-12-day>Sub-phase 1A — Inventory + decisions (½ day)</h4> <p><strong>Goal:</strong> Avoid writing policies that contradict the real system or overpromise.</p> <p>Checklist:</p> <ul> <li>Confirm what is already stated on <code>/methods</code>, <code>/about</code>, <code>/researchers</code>, footer disclaimers, and Phase 0 callouts.</li> <li>Confirm what user data is currently collected (likely: server access logs via Caddy/uvicorn; no explicit frontend analytics).</li> <li>Decide the <strong>minimum policy commitments</strong> you are comfortable operationalizing:</li> <li>Corrections response time (example: “within 7 days”; urgent labeling issues: “within 48 hours”).</li> <li>What you will and won’t take down (government sources vs third-party; link-outs vs full removal; “restrict access” option).</li> <li>Which contact channel is authoritative (email; optionally GitHub issues for technical items).</li> <li>Decide the initial “advisory circle” stance:</li> <li>If you don’t yet have advisors, plan to publish “seeking advisors” language rather than faking a board.</li> </ul> <p>Deliverables:</p> <ul> <li>A short “Phase 1 policy decisions” note (can live as a section in the changelog or as internal notes).</li> <li>A list of new public routes to create (see Sub-phase 1C).</li> </ul> <h4 id=sub-phase-1b-draft-public-governance-content-12-days>Sub-phase 1B — Draft public Governance content (1–2 days)</h4> <p><strong>Goal:</strong> Ship a governance page that answers the big questions quickly.</p> <p>Governance page structure (recommended single page with anchored sections):</p> <p>1) <strong>Mission + audience</strong> - One sentence mission (align with Phase 0). - Primary audiences (researchers/journalists/educators) + secondary audiences (public/clinicians) with guardrails.</p> <p>2) <strong>Scope + inclusion criteria</strong> - What sources qualify (Canadian public health agencies; criteria examples): - Publicly accessible pages - High-impact guidance/data/communications - Stable provenance labeling possible - What’s out of scope (examples to explicitly state): - Private/internal content; anything behind login - User-submitted or personal data sources - Any attempt to “mirror the entire internet” - “Reliability over breadth” statement.</p> <p>3) <strong>Provenance commitments</strong> - What you guarantee to show on snapshot pages (examples): - Capture timestamp (timezone) - Source name/code - Original URL - Snapshot permalink - Explicit limitation examples: - Some JS dashboards may not replay perfectly - Missing assets may occur - Captures represent “what the crawler saw”, not a perfect reconstruction</p> <p>4) <strong>Corrections policy</strong> - What counts as a correction: - Wrong metadata, broken replay/raw HTML, mislabeled source, missing warnings - What does <em>not</em> count as a correction: - Disagreements with what an agency published - Response expectations (SLA language you can meet) - How corrections are documented (ties to changelog; optional per-snapshot note later)</p> <p>5) <strong>Takedown / opt-out policy</strong> - Most content is from government sources; still define: - How to request review - What you do when a request is credible (e.g., restrict access while reviewing) - How you handle third-party embedded content captured inside a government page - Make it explicit you don’t promise removal of public-interest government material unless there’s a compelling reason.</p> <p>6) <strong>Non-affiliation + “not medical advice”</strong> - Reference footer disclaimers. - Make the “what this is / isn’t” block visible.</p> <p>7) <strong>Advisory circle</strong> - Charter summary and cadence. - If not yet formed: “seeking advisors” + what backgrounds you’re looking for.</p> <p>Examples to include (short, non-interpretive):</p> <ul> <li>“Researchers: cite what was visible on Jan 01, 2025.”</li> <li>“Journalists: track when wording on a guidance page changed.”</li> </ul> <p>Deliverables:</p> <ul> <li>Draft Governance copy ready for implementation as a new public route.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A first-time visitor can read only the headings and understand: purpose, scope, provenance, corrections, takedown, and non-advice posture.</li> </ul> <h4 id=sub-phase-1c-add-public-pages-and-navigation-frontend-12-days>Sub-phase 1C — Add public pages and navigation (frontend) (1–2 days)</h4> <p><strong>Goal:</strong> Make governance + policies discoverable without cluttering the primary nav.</p> <p>Recommended new frontend routes:</p> <ul> <li><code>/governance</code> (main page; anchored sections)</li> <li><code>/terms</code></li> <li><code>/privacy</code></li> <li><code>/changelog</code></li> <li><code>/report</code> (or <code>/report-issue</code>)</li> </ul> <p>Navigation/linking strategy:</p> <ul> <li>Add links in the <strong>footer</strong> (preferred) under a small “Project” or “Policies” column.</li> <li>Keep the header nav unchanged for now (avoid overwhelming top-level IA).</li> <li>Ensure each of these pages repeats the core disclaimers (reuse canonical copy + the existing footer).</li> </ul> <p>Changelog page content model (choose one):</p> <ul> <li><strong>Option A (simplest):</strong> A Markdown file committed in the frontend repo and rendered by the page.</li> <li><strong>Option B:</strong> A lightweight JSON/YAML content file with date/title/body entries.</li> </ul> <p>Deliverables:</p> <ul> <li>Public pages implemented with consistent typography and accessible structure.</li> <li>Footer links added.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>All pages build on Vercel, pass lint/tests, and do not introduce third-party scripts or weaken CSP.</li> </ul> <h4 id=sub-phase-1d-report-an-issue-intake-ux-frontend-1-day>Sub-phase 1D — “Report an issue” intake UX (frontend) (1 day)</h4> <p><strong>Goal:</strong> Structured intake without collecting sensitive info.</p> <p>Form fields (recommended):</p> <ul> <li>Category (dropdown):</li> <li>Broken snapshot/replay</li> <li>Incorrect metadata (date/source/URL)</li> <li>Missing snapshot / request a capture</li> <li>Takedown / content concern</li> <li>General feedback</li> <li>Optional context:</li> <li>Snapshot ID (if applicable)</li> <li>Original URL (if known)</li> <li>Description (required; include “Do not include personal/health info” warning)</li> <li>Optional contact email (explicitly optional; users can also just email <code>contact@healtharchive.ca</code>)</li> </ul> <p>Failover behavior:</p> <ul> <li>If backend API is reachable: submit the form and return a short “received” confirmation with a reference ID.</li> <li>If backend API is unreachable: provide a “mailto” fallback that pre-fills subject/body with the selected category + details.</li> </ul> <p>Deliverables:</p> <ul> <li>A clear “Report an issue” page that explains what happens next and expected response times.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A user can report an issue even if the live API is down (offline fallback still works).</li> </ul> <h4 id=sub-phase-1e-minimal-backend-support-for-issue-intake-12-days>Sub-phase 1E — Minimal backend support for issue intake (1–2 days)</h4> <p><strong>Goal:</strong> Make reports actionable and auditable, without creating a large moderation system.</p> <p>Recommended backend capabilities:</p> <ul> <li>A small DB-backed “issue report” record with:</li> <li>category, description, optional snapshot_id, optional original_url, created_at</li> <li>optional reporter_email (nullable)</li> <li>status (new / triaged / resolved)</li> <li>internal notes (admin-only)</li> <li>A <strong>public</strong> POST endpoint for submissions (with input validation and spam protection).</li> <li>An <strong>admin-only</strong> endpoint to list and view reports, protected by existing admin token rules.</li> </ul> <p>Spam/risk controls (pick a minimal set you can sustain):</p> <ul> <li>Rate limit by IP (coarse) and/or a “honey pot” hidden field.</li> <li>Hard cap payload sizes.</li> <li>Explicitly reject submissions that look like they include personal health information (at minimum, a warning plus optional keyword heuristics).</li> </ul> <p>Deliverables:</p> <ul> <li>Issue intake pipeline exists end-to-end (frontend → backend → admin view).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Public submissions work from production origin(s) without weakening CORS.</li> <li>Admin token remains required for browsing report details.</li> </ul> <h4 id=sub-phase-1f-advisory-circle-non-code-ongoing-start-in-phase-1>Sub-phase 1F — Advisory circle (non-code) (ongoing; start in Phase 1)</h4> <p><strong>Goal:</strong> Create real external credibility.</p> <p>Steps:</p> <ul> <li>Draft a 1-page advisory charter:</li> <li>Purpose (scope/risk/governance review, not operations)</li> <li>Cadence (quarterly)</li> <li>What advisors do and don’t do</li> <li>Identify and contact candidates:</li> <li>librarian/archivist, public health researcher, science communication/journalism</li> <li>Publish either:</li> <li>Names/titles (with permission), or</li> <li>A “seeking advisors” section until you have consent to publish names</li> </ul> <p>Deliverables:</p> <ul> <li>Charter text included on <code>/governance</code> (or linked from it).</li> </ul> <h4 id=sub-phase-1g-update-docs-and-prove-maintenance-12-day>Sub-phase 1G — Update docs and prove maintenance (½ day)</h4> <p><strong>Goal:</strong> Make Phase 1 changes easy for a future maintainer to understand.</p> <ul> <li>Update:</li> <li>Frontend docs index or implementation guide (where the new routes live)</li> <li>Backend docs index (new issue intake endpoints, if added)</li> <li>Add a “Phase 1 complete” entry to <code>/changelog</code> with date + bullet list.</li> </ul> <p><strong>Definition of done (Phase 1, detailed)</strong></p> <ul> <li>New public pages exist and are linked from the site: <code>/governance</code>, <code>/terms</code>, <code>/privacy</code>, <code>/changelog</code>, <code>/report</code> (or equivalent).</li> <li>Policies describe how HealthArchive actually operates today, including annual editions, constrained scope, and replay limitations.</li> <li>Issue reporting is structured and works even when the API is down (via fallback).</li> <li>No new sensitive data is collected; privacy page matches reality.</li> <li>All tests pass (frontend + backend) and CSP/CORS/admin protections are not weakened.</li> </ul> <p><strong>Status (Phase 1 implementation)</strong></p> <ul> <li>Implemented on 2025-12-21.</li> <li>Public pages added: <code>/governance</code>, <code>/terms</code>, <code>/privacy</code>, <code>/changelog</code>, <code>/report</code>.</li> <li>Issue intake pipeline implemented with a backend <code>/api/reports</code> endpoint and admin views.</li> <li>Frontend uses a same-origin proxy route (<code>/api/report</code>) so reporting works even when the backend CORS policy remains strict.</li> <li>Footer and snapshot/browse views link to the report flow.</li> </ul> <hr> <h2 id=phase-2-make-impact-measurable-visible-build-on-what-you-already-have>Phase 2 — Make Impact Measurable + Visible (build on what you already have)</h2> <p><strong>Goal:</strong> You already show “snapshots/pages” on the homepage; now add the metrics that prove reliability and adoption.</p> <p><strong>2.1 Define the official metric set (small, stable, defensible)</strong> You already have “Archived snapshots” and “Unique pages” via <code>/api/stats</code>. Add (conceptually):</p> <ul> <li>Coverage: sources tracked + per-source coverage window</li> <li>Freshness: time from capture completion → searchable</li> <li>Reliability: crawl success rate, indexing success rate, API uptime</li> <li>Usage: searches/day, snapshot views/day, browse views/day (requires analytics or backend logging strategy)</li> <li>Engagement: digest subscribers (once Phase 3 exists)</li> <li>External validation: partner links/embeds, citations/mentions</li> </ul> <p><strong>2.2 Add a public Status/Metrics page</strong> This shouldn’t be “vanity metrics”; it should make the service look professionally operated. Suggested sections:</p> <ul> <li>“Current status”: API health, last successful capture per source, replay availability (if enabled)</li> <li>“Coverage”: sources tracked; first/last capture dates per source (already available via <code>/api/sources</code>)</li> <li>“Reliability”: 30/90-day uptime + recent incidents (even manual initially)</li> <li>“Data notes”: known limitations; what “missing” means</li> </ul> <p><strong>2.3 Add analytics deliberately (or explicitly don’t)</strong> Right now there’s no analytics code in the frontend. Decide:</p> <ul> <li>If you add analytics, pick a privacy-preserving approach and align CSP/security headers accordingly (<code>healtharchive-frontend/next.config.ts:3</code>).</li> <li>If you do not, say so explicitly in Privacy, and rely on server-side aggregate counts + partner evidence.</li> </ul> <p><strong>2.4 Monthly impact report artifact</strong> Make this a repeatable, boring discipline:</p> <ul> <li>“What changed in the archive”</li> <li>“Reliability improvements”</li> <li>“Coverage changes”</li> <li>“Usage snapshot”</li> <li>“Partner highlights” This becomes your ongoing “proof file.”</li> </ul> <p><strong>Definition of done (Phase 2)</strong></p> <ul> <li>You can point to a stable public page that answers: “Is it up? what’s covered? how current? is it being used?”</li> <li>You can produce (even manually) a monthly impact report with consistent fields.</li> </ul> <hr> <h2 id=phase-3-change-tracking-compare-digest-major-new-capability-biggest-adoption-unlock>Phase 3 — Change Tracking + Compare + Digest (major new capability; biggest adoption unlock)</h2> <p><strong>Goal:</strong> You already have search + snapshots + replay editions. This phase adds the missing “what changed?” layer while staying non-interpretive.</p> <p><strong>3.1 Define “change tracking” in a strictly descriptive way</strong> Guardrail language (recommend adopting everywhere this appears):</p> <ul> <li>“We report <em>textual changes</em> between archived captures. We do not interpret or recommend actions.”</li> </ul> <p>Decisions to make up front (policy-level, not code):</p> <ul> <li>What counts as a “meaningful change” vs boilerplate</li> <li>How to handle noisy pages (dashboards, frequently regenerated pages)</li> <li>Whether you support per-page timelines for all pages or only “high-signal” pages first</li> </ul> <p><strong>3.2 Compare view</strong> User-facing outcomes:</p> <ul> <li>“Compare two versions” from snapshot detail (and/or from a page timeline)</li> <li>Highlight changed sections; show “added/removed/changed” counts</li> <li>A clear “context” strip: source, original URL, capture timestamps, edition/job</li> </ul> <p><strong>3.3 “What changed” feed</strong> A new surface that drives repeat visits:</p> <ul> <li>“Changed this week” feed</li> <li>Filterable by source and date</li> <li>Optional curated topic groupings later (be careful: topic tagging can imply editorial authority; keep it mechanical if possible)</li> </ul> <p><strong>3.4 Digest (start web + RSS; email later)</strong> Given your CSP/security posture, start with:</p> <ul> <li>Web digest archive page</li> <li>RSS feed Add email only after you’re confident in content quality and cadence.</li> </ul> <p>Digest categories (aligned with your current project goals):</p> <ul> <li>Top changes (by magnitude/importance heuristic, explained plainly)</li> <li>New pages discovered</li> <li>Pages removed/redirected (as observed via crawl)</li> <li>“Coverage notes” (e.g., a source had capture issues)</li> </ul> <p><strong>Definition of done (Phase 3)</strong></p> <ul> <li>A user can answer: “What changed on PHAC pages last week?” without manual searching.</li> <li>Compare output is descriptive, provenance-rich, and does not read like guidance.</li> </ul> <hr> <h2 id=phase-4-distribution-external-validation-mostly-non-code-but-critical>Phase 4 — Distribution + External Validation (mostly non-code, but critical)</h2> <p><strong>Goal:</strong> Turn “useful site” into “verified public service.”</p> <p><strong>4.1 Partner target list + pitch assets</strong> You already have strong narrative copy; formalize it into partner-ready material:</p> <ul> <li>1-page brief (mission, safety posture, screenshots, metrics) — now published at <code>/brief</code></li> <li>Citation guidance (snapshots + compare views) — now published at <code>/cite</code></li> <li>Example compare + digest pages — now published at <code>/compare</code> and <code>/digest</code></li> </ul> <p><strong>4.2 Secure one distribution partner + one verifier</strong> Treat them as different roles:</p> <ul> <li>Distribution partner: links/embeds/shares digest</li> <li>Verifier: can credibly confirm you built/operate it and it’s used</li> </ul> <p><strong>4.3 Partner-facing “embed” surface (keep it simple)</strong> Start with the lowest-friction distribution format:</p> <ul> <li>“Recent changes for <source>” widget and/or RSS feeds per source Keep this lightweight so you don’t create a new support burden.</li> </ul> <p><strong>Definition of done (Phase 4)</strong></p> <ul> <li>One external org publicly links/embeds; one named verifier is willing to attest to use and impact; you can show basic usage metrics.</li> </ul> <hr> <h2 id=phase-5-research-grade-outputs-youre-already-halfway-there>Phase 5 — Research-Grade Outputs (you’re already halfway there)</h2> <p><strong>Goal:</strong> Your backend is already closer to “research API” than most projects; now package it safely.</p> <p><strong>5.1 Formal citation guidance</strong> Citation guidance is now published at <code>/cite</code>, but Phase 5 should make it harder to misuse and easier to reuse:</p> <ul> <li>Ensure the recommended archived URL format corresponds to what production serves.</li> <li>Include capture timestamp (with timezone) and original URL.</li> <li>Consider adding “how to cite when replay is enabled vs raw HTML only” (conceptually).</li> </ul> <p><strong>5.2 Research access pathway</strong> Two tracks:</p> <ul> <li>Human: clear documentation, limitations, and contact path for bulk needs.</li> <li>Machine: stable exports for snapshot metadata and (later) change events. Keep it “small and safe” first (metadata only), and make sustainability explicit (rate limits, fair use).</li> </ul> <p><strong>5.3 Scholarly output</strong> Once Phase 3 exists, you have publishable material:</p> <ul> <li>A methods note/poster on provenance + change tracking without interpretation</li> <li>A small descriptive analysis: “guidance drift” patterns over time (careful framing)</li> </ul> <p><strong>Definition of done (Phase 5)</strong></p> <ul> <li>A researcher can cite snapshots correctly and request or retrieve structured metadata and change-event data without bespoke coordination. See the expanded Phase 5 implementation plan later in this document for sub-phases and acceptance criteria.</li> </ul> <hr> <h2 id=phase-6-reliability-sustainability-a-lot-already-exists-now-operationalize-it>Phase 6 — Reliability + Sustainability (a lot already exists; now operationalize it)</h2> <p><strong>Goal:</strong> You already have serious ops docs and automation templates; this phase turns them into a lived routine and a public-facing posture.</p> <p><strong>6.1 Publish capture cadence policy (public)</strong> Internally you already have the annual campaign definition and scope rules (<code>healtharchive-backend/docs/operations/annual-campaign.md:1</code>). Publicly, you want:</p> <ul> <li>Annual edition concept (Jan 01 UTC)</li> <li>What triggers ad-hoc captures (rare, explicit)</li> <li>Why scope is limited (reliability &gt; breadth)</li> </ul> <p><strong>6.2 Formalize ops cadence (internal)</strong> You already have checklists and systemd templates (<code>healtharchive-backend/docs/deployment/systemd/README.md:1</code>). Make the “boring routine” explicit:</p> <ul> <li>Weekly health review</li> <li>Monthly reliability review (ties into the impact report)</li> <li>Quarterly restore test</li> <li>Dependency patch cadence</li> </ul> <p><strong>6.3 Growth constraints</strong> You already have a single-VPS production runbook (<code>healtharchive-backend/docs/deployment/production-single-vps.md:1</code>) and strict CORS design. Define explicit constraints to avoid scope creep:</p> <ul> <li>Source cap for the year</li> <li>Storage budget and retention posture (especially with replay depending on WARCs)</li> <li>Performance budgets (API latency, indexing time)</li> </ul> <p><strong>Definition of done (Phase 6)</strong></p> <ul> <li>You have a documented and practiced operational routine, plus a public statement of cadence/scope constraints.</li> </ul> <hr> <h2 id=the-updated-if-you-only-do-6-things-highest-roi-given-whats-already-built>The Updated “If You Only Do 6 Things” (highest ROI given what’s already built)</h2> <ol> <li>Public Governance + Terms/Privacy + Corrections/Takedown process</li> <li>Public Changelog + monthly impact report discipline</li> <li>Public Status/Metrics page (build on existing <code>/api/stats</code> homepage metrics)</li> <li>Change tracking + Compare + “What changed” feed (strictly descriptive)</li> <li>Digest (web + RSS first) + subscriber metric once email is added</li> <li>One distribution partner + one authoritative verifier (non-code, but decisive)</li> </ol> <hr> <h2 id=expanded-guidance-copious-context-examples>Expanded Guidance (Copious Context + Examples)</h2> <p>This section “adds meat to the bones” so an implementation agent can translate the roadmap into concrete, incremental tasks without reinventing the rationale.</p> <h3 id=non-negotiable-project-posture-repeat-in-every-implementation>Non-negotiable project posture (repeat in every implementation)</h3> <p>HealthArchive must always read as:</p> <ul> <li><strong>Independent</strong> (not government, not endorsed, not affiliated)</li> <li><strong>Archival</strong> (historical record, time-stamped)</li> <li><strong>Non-authoritative</strong> (not current guidance; not medical advice)</li> <li><strong>Reproducibility-first</strong> (citations point to what was visible on date X)</li> <li><strong>Safety-first</strong> (avoid features that look like interpretation or advice)</li> </ul> <p>If a new feature increases the risk of misinterpretation (e.g., “summaries,” “key takeaways,” “what it means”), it should be treated as out-of-scope unless it is purely descriptive and has strong guardrails.</p> <h3 id=a-note-on-abs-style-impact-framing-why-these-upgrades-matter>A note on “ABS-style” impact framing (why these upgrades matter)</h3> <p>The upgrade plan is intentionally not “more code for the sake of code.” It’s about converting a technically solid archive into:</p> <ul> <li>A governed public-interest service (clear rules, corrections, takedown posture)</li> <li>A measurable service (metrics, reliability signals, visible operational maturity)</li> <li>A repeat-usage product (change tracking + digest)</li> <li>A verifiable project (external partners + credible verifier)</li> </ul> <p>In other words: <strong>institutionalization + proof of use</strong>, not just implementation.</p> <hr> <h2 id=phase-0-tighten-narrative-reduce-copy-drift-expanded>Phase 0 — Tighten Narrative + Reduce Copy Drift (expanded)</h2> <h3 id=why-this-matters>Why this matters</h3> <ul> <li>HealthArchive already has strong disclaimers, but they’re not uniformly present on the highest-traffic workflow pages (search/browse).</li> <li>A consistent “what this is/isn’t” block reduces:</li> <li>confusion (“is this current guidance?”),</li> <li>reputational risk (“are you speaking for PHAC?”),</li> <li>and legal/compliance ambiguity (“are you collecting data?”).</li> <li>Consistent copy also reduces future maintenance cost: you update one canonical block, not five divergent variations.</li> </ul> <h3 id=what-already-exists-repo-evidence>What already exists (repo evidence)</h3> <ul> <li>Footer disclaimers: independence + non-advice (<code>healtharchive-frontend/src/components/layout/Footer.tsx</code>).</li> <li>Homepage “What this site is/isn’t” block (<code>healtharchive-frontend/src/app/page.tsx</code>).</li> <li>Snapshot viewer “Important note” block (<code>healtharchive-frontend/src/app/snapshot/[id]/page.tsx</code>).</li> <li>About and Methods pages already emphasize independence and non-partisanship (<code>healtharchive-frontend/src/app/about/page.tsx</code>, <code>healtharchive-frontend/src/app/methods/page.tsx</code>).</li> </ul> <h3 id=main-gaps-to-close>Main gaps to close</h3> <ul> <li><code>/archive</code> currently emphasizes search UX and offline fallback; it doesn’t prominently restate the archive/non-advice posture where users make decisions about content.</li> <li><code>/browse/[id]</code> does a good job technically, but it’s still the highest-risk page for misinterpretation because it looks like “the website” (not a record).</li> <li>Methods page is written partly in “future tense,” even though the backend and runbook show much of this is real.</li> </ul> <h3 id=deliverables-what-to-produce>Deliverables (what to produce)</h3> <p>1) A <strong>single canonical mission block</strong> (2–3 sentences) used consistently across: - <code>/</code> (home) - <code>/about</code> - <code>/methods</code> - <code>/researchers</code> - metadata description in <code>healtharchive-frontend/src/app/layout.tsx</code></p> <p>2) A <strong>single canonical “What this is/isn’t” block</strong> surfaced on: - <code>/</code> (already exists; may tighten language) - <code>/archive</code> (add) - <code>/snapshot/[id]</code> (already has similar; align wording) - <code>/browse/[id]</code> (add a more prominent version)</p> <p>3) Methods copy updated from “conceptual design” → “current reality + limitations.”</p> <h3 id=copy-examples-ready-to-adapt>Copy examples (ready-to-adapt)</h3> <p>Mission (2–3 sentences):</p> <blockquote> <p>HealthArchive.ca preserves time-stamped snapshots of selected Canadian public health web pages so changes remain auditable and citable. It is an independent, non-governmental archival project — not medical advice and not a substitute for current official guidance.</p> </blockquote> <p>What this is / isn’t (workflow-safe):</p> <blockquote> <p><strong>This is:</strong> an archival record of what public health websites displayed at a specific time, with capture dates and citations. <strong>This is not:</strong> current guidance, medical advice, or an official government website. <strong>For current recommendations:</strong> always consult the official source website.</p> </blockquote> <p>Browse-mode warning (short, unavoidable):</p> <blockquote> <p>You are viewing an archived capture from <strong><capture date time></strong>. Links and content may be outdated or superseded. For current guidance, use the official website.</p> </blockquote> <h3 id=acceptance-criteria-practical>Acceptance criteria (practical)</h3> <ul> <li>A user can enter via <code>/archive</code> or a shared <code>/browse/[id]</code> link and still see an explicit, plain-language disclaimer without scrolling.</li> <li>Copy on Methods/About/Researchers does not imply “planned someday” for already-live infrastructure (but still clearly marks the project as “in development” and acknowledges limitations).</li> </ul> <h3 id=phase-0-implementation-plan-highly-detailed-sub-phases>Phase 0 implementation plan (highly detailed; sub-phases)</h3> <p>This plan is written so another agent can implement Phase 0 as a sequence of small, low-risk PRs. The intent is to improve <strong>copy consistency</strong>, <strong>risk posture</strong>, and <strong>accuracy</strong> without adding new product features.</p> <h4 id=phase-0a-inventory-and-decide-the-canonical-copy>Phase 0A — Inventory and decide the “canonical copy”</h4> <p><strong>Purpose</strong></p> <ul> <li>Reduce copy drift across pages.</li> <li>Avoid accidental “future tense” descriptions that contradict current backend reality.</li> <li>Ensure the “archived/not current” message appears on high-risk entrypoints (<code>/archive</code>, <code>/browse/[id]</code>) as well as home/snapshot.</li> </ul> <p><strong>Tasks</strong></p> <p>1) Inventory all existing disclaimers and mission-like sentences in the frontend: - Footer independence and “not medical advice” language. - Homepage hero description. - Homepage “What this site is/isn’t” block. - Snapshot viewer “Important note.” - About/Methods/Researchers intro copy. - Document metadata description (<code>healtharchive-frontend/src/app/layout.tsx</code>). 2) Identify any copy conflicts or drift: - Places where “intended to” / “would” is used despite current implementation. - Places where the disclaimer is missing entirely on workflow pages. - Inconsistent phrasing that could be quoted out of context (e.g., “public health information” vs “public health guidance” vs “webpages”). 3) Decide the canonical text for: - <strong>Mission block</strong> (2–3 sentences). - <strong>What this is / isn’t</strong> (3 short bullets or 3 lines). - <strong>Browse-mode warning</strong> (1 short line suitable for “above the fold”).</p> <p><strong>Deliverables</strong></p> <ul> <li>A final, agreed “canonical copy” snippet that will be reused across the site.</li> <li>A short note (1–2 paragraphs) explaining the rationale and any intentional wording choices (e.g., why “web pages” vs “guidance”).</li> </ul> <p><strong>Recommended canonical text (starting point; edit as needed)</strong></p> <ul> <li>Mission (short):</li> <li>“HealthArchive.ca preserves time-stamped snapshots of selected Canadian public health web pages so changes remain auditable and citable.”</li> <li>“It is an independent, non-governmental archival project — not medical advice and not a substitute for current official guidance.”</li> <li>What this is / isn’t:</li> <li>“This is: an archival record of what public websites displayed at a specific time, with capture dates and citations.”</li> <li>“This is not: current guidance, medical advice, or an official government website.”</li> <li>“For current recommendations: consult the official source website.”</li> <li>Browse warning:</li> <li>“You are viewing an archived capture from <capture date time> — not current guidance.”</li> </ul> <p><strong>Acceptance criteria</strong></p> <ul> <li>There is exactly one “canonical” version of each copy block, and any variations are intentional and documented.</li> </ul> <h4 id=phase-0b-create-a-reuse-mechanism-to-prevent-drift>Phase 0B — Create a reuse mechanism (to prevent drift)</h4> <p><strong>Purpose</strong></p> <ul> <li>Make it hard for future edits to accidentally diverge.</li> <li>Ensure the same message appears consistently across multiple routes without manual copy-paste.</li> </ul> <p><strong>Recommended approach (choose one)</strong></p> <ul> <li>Option 1 (preferred): create a small shared UI component (or two) that renders:</li> <li>Mission block (short)</li> <li>What this is/isn’t block (compact)</li> <li>Browse warning (ultra-compact)</li> <li>Option 2: create a single exported “copy constants” object used by page components.</li> </ul> <p><strong>Decision criteria</strong></p> <ul> <li>If the block has layout/structure (headings, list) → component is usually better.</li> <li>If it’s a single sentence reused in metadata and in-page copy → constants can reduce duplication.</li> </ul> <p><strong>Deliverables</strong></p> <ul> <li>A single source of truth for the canonical copy, referenced by:</li> <li><code>/</code> (homepage)</li> <li><code>/archive</code></li> <li><code>/snapshot/[id]</code></li> <li><code>/browse/[id]</code></li> <li>and optionally metadata description (or a close paraphrase, if metadata needs to be shorter).</li> </ul> <p><strong>Acceptance criteria</strong></p> <ul> <li>Future contributors can update the canonical disclaimer in one place.</li> <li>No page introduces new disclaimer phrasing unless it’s a deliberate exception.</li> </ul> <h4 id=phase-0c-update-workflow-entrypoints-highest-risk-pages>Phase 0C — Update workflow entrypoints (highest risk pages)</h4> <p><strong>Purpose</strong></p> <ul> <li>Users often enter the site via:</li> <li><code>/archive</code> (search/browse),</li> <li><code>/snapshot/[id]</code> (shared links),</li> <li><code>/browse/[id]</code> (embedded archived page).</li> <li>These are also where misinterpretation risk is highest.</li> </ul> <p><strong>Tasks</strong></p> <p>1) <code>/archive</code>: - Add a compact “archived/not current guidance” block near the top of the page (above search/results), tuned to browsing/search context. - Ensure it remains visible in both “live API” and “offline fallback” modes. 2) <code>/browse/[id]</code>: - Add a short warning above the iframe and keep it “above fold” on typical laptop/mobile widths. - Include capture date/time in the message when available (this is already present in the browse header UI; the warning should explicitly use it). 3) <code>/snapshot/[id]</code>: - Align existing “Important note” wording with the canonical text (don’t remove detail; just remove drift). - Ensure provenance fields displayed (source, capture date, original URL) stay prominent and readable.</p> <p><strong>Acceptance criteria</strong></p> <ul> <li>A user landing directly on <code>/archive</code> or <code>/browse/[id]</code> sees the “archived/not current” message without scrolling.</li> <li>The message does not imply medical interpretation or government endorsement.</li> </ul> <h4 id=phase-0d-normalize-aboutmethodsresearchers-to-current-reality>Phase 0D — Normalize “about/methods/researchers” to current reality</h4> <p><strong>Purpose</strong></p> <ul> <li>These pages frame the project; they must be accurate to the implemented stack and operational posture.</li> <li>The goal is to remove unnecessary “future tense” while preserving honest “in development” status and limitations.</li> </ul> <p><strong>Tasks</strong></p> <p>1) <code>/methods</code>: - Replace “intended to” / “would rely on” language where the backend already does the thing today (WARC storage, indexing, replay options). - Add a short, high-level statement about the annual edition concept (Jan 01 UTC) as the default cadence, and explicitly state scope is constrained by reliability. 2) <code>/about</code>: - Keep the motivation and non-partisanship stance. - Add one sentence linking “why the archive exists” to research/journalism reproducibility (“citable snapshots,” “auditability”). 3) <code>/researchers</code>: - Keep current “planned capabilities” callout but make sure it matches the roadmap (timeline/compare/exports/diffs). - Ensure citation guidance matches the site’s actual URL patterns and the snapshot viewer’s semantics (replay vs raw HTML).</p> <p><strong>Acceptance criteria</strong></p> <ul> <li>These pages do not contradict the backend runbooks (annual campaign, single VPS reality, optional replay).</li> <li>These pages do not overpromise completeness or fidelity.</li> </ul> <h4 id=phase-0e-metadata-consistency-checks-finish-work>Phase 0E — Metadata + consistency checks (finish work)</h4> <p><strong>Purpose</strong></p> <ul> <li>Reduce the chance that the site is indexed or quoted with misleading metadata.</li> <li>Ensure site-wide consistency and accessibility of the disclaimers.</li> </ul> <p><strong>Tasks</strong></p> <p>1) Metadata description (<code>healtharchive-frontend/src/app/layout.tsx</code>): - Ensure it includes independence + archive + “what it was at the time” framing. - Keep it short enough for search engine snippets. 2) Consistency pass: - Confirm the same canonical disclaimer appears on: - Home, Archive, Snapshot, Browse. - Confirm Terms/Privacy/Governance are not referenced yet (Phase 1 will add them), unless you explicitly want “coming soon” links. 3) Accessibility pass: - Ensure the disclaimer blocks use readable text sizes and don’t rely on color alone. - Ensure any new callouts have appropriate semantics (e.g., headings, lists). 4) “Out of scope” confirmation: - Confirm Phase 0 did not introduce any new backend endpoints, analytics scripts, or data collection.</p> <p><strong>Acceptance criteria</strong></p> <ul> <li>Copy is consistent, accurate to current deployment, and visible where it matters.</li> <li>No security posture regressions (CSP, iframe sandboxing, strict “public API only” usage).</li> </ul> <h4 id=suggested-pr-breakdown-sequencing>Suggested PR breakdown (sequencing)</h4> <p>To keep changes small and reviewable:</p> <p>1) PR-0: Add canonical copy mechanism (component/constants) + update homepage to use it. 2) PR-1: Add disclaimer block to <code>/archive</code>. 3) PR-2: Add browse-mode warning to <code>/browse/[id]</code> (and align snapshot page wording). 4) PR-3: Update <code>/methods</code>, <code>/about</code>, <code>/researchers</code> to match current reality and the canonical copy. 5) PR-4: Metadata + final consistency/accessibility pass.</p> <h4 id=phase-0-definition-of-done-checklist>Phase 0 “Definition of done” (checklist)</h4> <ul> <li>Canonical mission + “is/isn’t” + browse warning copy exists in one place and is reused.</li> <li><code>/archive</code> and <code>/browse/[id]</code> show “archived/not current guidance” without scrolling.</li> <li>Methods/About/Researchers copy no longer reads like a hypothetical system when it is already deployed.</li> <li>No new tracking/analytics added (Phase 2 will decide this deliberately).</li> </ul> <h4 id=phase-0-implementation-notes-completed>Phase 0 implementation notes (completed)</h4> <p>The following Phase 0 items are implemented in the current repo state:</p> <ul> <li>Canonical copy source of truth: <code>healtharchive-frontend/src/lib/siteCopy.ts</code></li> <li>Used for metadata description: <code>healtharchive-frontend/src/app/layout.tsx</code></li> <li>Used on the homepage “is/isn’t” block: <code>healtharchive-frontend/src/app/page.tsx</code></li> <li>Workflow disclaimers added/normalized:</li> <li><code>/archive</code> callout: <code>healtharchive-frontend/src/app/archive/page.tsx</code></li> <li><code>/archive/browse-by-source</code> callout: <code>healtharchive-frontend/src/app/archive/browse-by-source/page.tsx</code></li> <li><code>/browse/[id]</code> warning with capture date and “not current guidance or medical advice”: <code>healtharchive-frontend/src/components/replay/BrowseReplayClient.tsx</code></li> <li><code>/snapshot/[id]</code> “Important note” aligned to canonical language: <code>healtharchive-frontend/src/app/snapshot/[id]/page.tsx</code></li> <li>“Future tense” reduction / accuracy updates:</li> <li>About: <code>healtharchive-frontend/src/app/about/page.tsx</code></li> <li>Methods (capture pipeline + annual edition posture described as policy): <code>healtharchive-frontend/src/app/methods/page.tsx</code></li> <li>Researchers citation guidance updated to match live numeric snapshot URLs: <code>healtharchive-frontend/src/app/researchers/page.tsx</code></li> <li>Confirmed non-goals for Phase 0: no new analytics scripts, no new backend endpoints, no changes to CSP/CORS/iframe sandboxing.</li> </ul> <hr> <h2 id=phase-1-public-governance-layer-expanded>Phase 1 — Public Governance Layer (expanded)</h2> <h3 id=why-this-matters_1>Why this matters</h3> <p>Governance is the difference between:</p> <ul> <li>“a cool archive site” and</li> <li>“a public-interest archival service that others can safely rely on.”</li> </ul> <p>It also reduces risk by making your policies explicit before anyone asks (and before you scale).</p> <h3 id=what-already-exists>What already exists</h3> <ul> <li>Internal operational and architecture documentation is already unusually strong in <code>healtharchive-backend/docs/**</code>.</li> <li>Public-facing pages cover motivation and limitations but do not yet provide:</li> <li>correction procedure,</li> <li>takedown/opt-out posture,</li> <li>a formal scope/inclusion policy,</li> <li>or Terms/Privacy as explicit pages.</li> </ul> <h3 id=deliverables-public-non-code-first>Deliverables (public, non-code-first)</h3> <p>These are best implemented as simple public pages in the frontend (static content first; automation later).</p> <p>1) <strong>Governance page</strong> (new public route; content-first) - What the project is / isn’t (canonical block) - Scope boundaries (what sources count; what’s out of scope; why) - Source inclusion criteria (mechanical, not vibes) - Provenance commitments (what metadata you guarantee on snapshots) - Corrections policy (what can be corrected and typical response times) - Takedown/opt-out policy (how to request, how decisions are made, how you handle third-party content) - Contact / escalation path</p> <p>2) <strong>Terms page</strong> - Research/reference use, no medical reliance - No endorsement / no affiliation - Copyright/takedown posture (plain language; do not overclaim legal certainty)</p> <p>3) <strong>Privacy page</strong> - Explicit “no patient data / no accounts” - What logs/analytics exist today - If analytics are added later, this page becomes the contract; update it in lockstep.</p> <p>4) <strong>Changelog page</strong> - Monthly cadence is fine. - Include “what changed” across: scope, features, reliability, policy.</p> <p>5) <strong>Report an issue page (intake)</strong> - A structured way to report: broken snapshot, wrong metadata, replay failure, missing page, correction request, takedown request, source suggestion. - Explain what information helps you triage (snapshot ID, original URL, screenshot, time, browser).</p> <h3 id=examples-policy-language-plain-defensible>Examples: policy language (plain, defensible)</h3> <p>Corrections:</p> <blockquote> <p><strong>Corrections:</strong> If metadata is wrong (capture date, source labeling, broken link) or a snapshot fails to load, report it. We aim to acknowledge reports within <strong>7 days</strong>, and urgent safety labeling issues within <strong>48 hours</strong>. Not all issues are fixable (some depend on what the crawl captured), but we document limitations and outcomes.</p> </blockquote> <p>Takedown / opt-out:</p> <blockquote> <p><strong>Takedown requests:</strong> If you are a site owner or rights holder and believe content should not be displayed, contact us with the URL(s) and your rationale. We review requests in good faith and may remove access, limit distribution, or add context. We publish aggregate counts of takedown requests in our transparency reporting.</p> </blockquote> <h3 id=acceptance-criteria>Acceptance criteria</h3> <ul> <li>A neutral user can find Governance/Terms/Privacy in under two clicks from any page (header or footer).</li> <li>The governance pages do not introduce new risk (no promises you can’t keep; no legal overreach; no secrets).</li> </ul> <hr> <h2 id=phase-2-make-impact-measurable-visible-expanded>Phase 2 — Make Impact Measurable + Visible (expanded)</h2> <h3 id=why-this-matters_2>Why this matters</h3> <ul> <li>You already expose “snapshots/pages” via <code>/api/stats</code> and show them on the homepage. That’s a strong start.</li> <li>The next step is making reliability and coverage legible in a “service-like” way:</li> <li>last capture per source,</li> <li>uptime posture,</li> <li>known issues,</li> <li>and (if you choose) usage metrics.</li> </ul> <h3 id=what-already-exists_1>What already exists</h3> <ul> <li>Backend has public endpoints that can power a status/metrics page without admin access:</li> <li><code>/api/health</code> (basic status + DB + counts)</li> <li><code>/api/stats</code> (snapshots/pages/sources totals)</li> <li><code>/api/sources</code> (per-source record counts + first/last capture dates + optional entry points and preview URLs)</li> <li>Frontend already uses <code>/api/stats</code> live on the homepage with fallback (<code>healtharchive-frontend/src/app/page.tsx</code>).</li> <li>Ops docs already recommend external uptime checks (<code>healtharchive-backend/docs/operations/monitoring-and-ci-checklist.md</code>).</li> </ul> <h3 id=deliverables>Deliverables</h3> <p>1) <strong>Public status/metrics page</strong> (new route) - Keep it simple and honest; don’t claim full observability if you don’t have it. - Prefer metrics you can compute from existing public API responses.</p> <p>2) <strong>Metric definitions (public or semi-public)</strong> - A short, explicit definition of each metric you report (so it’s not “numbers with vibes”).</p> <p>3) <strong>Monthly impact report template</strong> - A one-page, repeatable artifact you can publish (web post or PDF).</p> <p>4) <strong>Analytics decision</strong> - Decide: no analytics (privacy-first) vs privacy-preserving analytics vs server-side aggregates. - Important: frontend CSP is restrictive; adding third-party scripts is a deliberate security decision, not a “drop-in.”</p> <h3 id=suggested-metrics-with-precise-definitions>Suggested metrics (with precise definitions)</h3> <ul> <li><strong>Coverage</strong></li> <li><code>sourcesTotal</code>: number of sources visible in <code>/api/sources</code>.</li> <li><code>pagesTotal</code>: unique page groups (from <code>/api/stats</code>).</li> <li><code>snapshotsTotal</code>: total snapshots (from <code>/api/stats</code>).</li> <li><strong>Freshness</strong></li> <li>per source: “last capture date” from <code>/api/sources</code> (this is a proxy for freshness; “time-to-index” requires additional tracking).</li> <li><strong>Reliability</strong></li> <li>API uptime: measured via external monitor of <code>/api/health</code> + frontend <code>/archive</code>.</li> <li>Crawl/index success rate: requires tracking job outcomes; can be public later as aggregates.</li> <li><strong>Usage</strong></li> <li>Only if you choose to measure: “searches/day,” “snapshot views/day,” “browse views/day.”</li> <li>If you don’t measure, say so explicitly and rely on partner/verifier evidence.</li> </ul> <h3 id=status-page-layout-example-content-not-ui-code>Status page layout example (content, not UI code)</h3> <p>Top: - “Current status: Operational / degraded / outage” (based on <code>/api/health</code> + static incident notes) - “Last updated: <timestamp>”</p> <p>Coverage: - Sources tracked: N - Snapshots: N - Pages: N</p> <p>Per-source table: - Source name - Records captured - First capture date - Last capture date - “Browse archived site” link (if entry point exists)</p> <p>Reliability: - “Uptime last 30 days” (if you have an external monitor) - “Recent incidents” (manual log is fine initially)</p> <h3 id=acceptance-criteria_1>Acceptance criteria</h3> <ul> <li>The status/metrics page works even when replay is not configured (and does not leak admin endpoints).</li> <li>The status/metrics page is explicit about what is measured and what is not.</li> </ul> <h3 id=phase-2-implementation-plan-detailed-sub-phases>Phase 2 Implementation Plan (Detailed; sub-phases)</h3> <p>Phase 2 is about <em>credibility through measurability</em>. The goal is not “more numbers”; it’s to make HealthArchive look and behave like a maintained public service with transparent coverage and clear limitations.</p> <h4 id=design-principles-phase-2>Design principles (Phase 2)</h4> <ul> <li><strong>Honesty over completeness.</strong> Only publish metrics you can define and reproduce.</li> <li><strong>Privacy-first.</strong> Prefer aggregated counts over user-level tracking. Default to collecting <em>less</em>.</li> <li><strong>No new risk surface by accident.</strong> Avoid adding third-party scripts until you have explicitly decided to do so and updated CSP accordingly.</li> <li><strong>Keep public vs admin boundaries strict.</strong> The status page must not depend on admin-only endpoints.</li> <li><strong>Single-VPS realism.</strong> Any new aggregation pipeline must be lightweight and must not compete with indexing/crawling for CPU/IO.</li> </ul> <h4 id=sub-phase-2a-decide-the-official-metric-contract-121-day>Sub-phase 2A — Decide the “official” metric contract (½–1 day)</h4> <p><strong>Goal:</strong> Create a stable set of metrics with explicit definitions, and decide how you’ll measure usage (or explicitly not).</p> <p>Deliverables:</p> <ul> <li>A “Metrics definitions” section (can live on the new <code>/status</code> page, or as a short doc linked from it).</li> <li>A decision on <strong>usage measurement</strong> (see Sub-phase 2D).</li> </ul> <p>Recommended official metrics (initial set):</p> <p>1) <strong>Coverage</strong> - <code>sourcesTotal</code>, <code>pagesTotal</code>, <code>snapshotsTotal</code> (already available via public API). - Per-source: - <code>recordCount</code>, <code>firstCapture</code>, <code>lastCapture</code> (already available via <code>/api/sources</code>).</p> <p>2) <strong>Freshness</strong> - Per-source “last capture date” (proxy for freshness). - Optional later: “time to index” (requires tracking job completion vs indexing completion).</p> <p>3) <strong>Reliability</strong> - Public: “API reachable” (based on <code>/api/health</code>). - Public: “Replay enabled” and “previews enabled” (based on whether URLs are returned). - External monitor uptime (%): start as “not yet measured” or “measured externally” until you have a real monitor.</p> <p>4) <strong>Usage (optional, and only if you choose)</strong> - <code>searchRequestsPerDay</code>, <code>snapshotViewsPerDay</code>, <code>browseViewsPerDay</code>, <code>reportSubmissionsPerDay</code> (aggregated). - If you do <em>not</em> measure usage, state that explicitly in <code>/privacy</code> and in the metrics definitions.</p> <p>Acceptance criteria:</p> <ul> <li>Each metric has: definition, data source, and update cadence (e.g., “computed nightly” vs “live”).</li> </ul> <h4 id=sub-phase-2b-public-statusmetrics-page-mvp-frontend-existing-endpoints-12-days>Sub-phase 2B — Public Status/Metrics page MVP (frontend + existing endpoints) (1–2 days)</h4> <p><strong>Goal:</strong> Ship a status page that works immediately without new backend changes.</p> <p>Recommended route:</p> <ul> <li><code>/status</code> (or <code>/status</code> + <code>/metrics</code> as a separate section; avoid naming collisions with backend <code>/metrics</code>).</li> </ul> <p>Data sources (public endpoints only):</p> <ul> <li><code>/api/health</code> → “API status”</li> <li><code>/api/stats</code> → totals</li> <li><code>/api/sources</code> → per-source coverage table</li> </ul> <p>Recommended sections (copywriting guidance):</p> <ul> <li><strong>Current status</strong></li> <li>“Operational / degraded / down” (simple, based on whether <code>/api/health</code> succeeds).</li> <li>Timestamp: “Last checked: …”</li> <li> <p>Small note: “This is a public archive; not medical advice.”</p> </li> <li> <p><strong>Coverage snapshot</strong></p> </li> <li>Sources tracked, snapshots, pages</li> <li> <p>Latest capture date (if available via stats)</p> </li> <li> <p><strong>Per-source coverage</strong></p> </li> <li>Source name + counts + first/last capture</li> <li> <p>Link to browse entry point (if available)</p> </li> <li> <p><strong>Data notes</strong></p> </li> <li>What “missing” can mean (not captured yet, capture failure, out of scope)</li> <li>Replay limitations and third-party asset caveats</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Page loads even if the backend is down (show an honest fallback message; do not fabricate metrics).</li> <li>Page stays within existing security posture (no new scripts; no CSP weakening).</li> </ul> <h4 id=sub-phase-2c-metrics-definitions-and-transparency-language-12-day>Sub-phase 2C — “Metrics definitions” and transparency language (½ day)</h4> <p><strong>Goal:</strong> Prevent “numbers with vibes” by publishing the meaning and limits of each metric.</p> <p>Include:</p> <ul> <li>What counts as a snapshot vs a page group</li> <li>Timezones (capture dates are UTC)</li> <li>What “last capture date” means (it is not necessarily “last updated by the source”)</li> <li>Whether usage metrics are collected (and if so, how coarse they are)</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A researcher can quote your definitions in a methods section without guesswork.</li> </ul> <h4 id=sub-phase-2d-decide-and-implement-a-usage-measurement-approach-plan-level-options-14-days>Sub-phase 2D — Decide and implement a usage measurement approach (plan-level options) (1–4 days)</h4> <p>This is the key decision point. Choose one:</p> <p><strong>Option D1: No usage analytics (privacy-first)</strong> - Publish only coverage + freshness + reliability proxies. - Evidence of impact comes from: partner adoption, citations, verifier statements, issue report volume. - Lowest risk and operational overhead.</p> <p><strong>Option D2: Server-side aggregate counters (recommended “best practice” for your posture)</strong> - Track <em>only aggregated daily counts</em> for key public actions: - search requests, snapshot detail views, raw snapshot views, browse page loads, report submissions - Store aggregates (e.g., per day) in the backend DB, not user-level logs. - No cookies and no third-party scripts required. - This is usually the best balance: measurable impact without surveillance optics.</p> <p><strong>Option D3: Privacy-preserving third-party analytics</strong> - Only if you explicitly decide to accept the CSP and supply-chain tradeoffs. - Must update <code>/privacy</code> to reflect the provider and data collected.</p> <p>Acceptance criteria:</p> <ul> <li>Whatever option you pick is reflected in <code>/privacy</code> and on the status page.</li> </ul> <h4 id=sub-phase-2e-reliability-measurement-incident-notes-122-days-incremental>Sub-phase 2E — Reliability measurement + incident notes (½–2 days, incremental)</h4> <p><strong>Goal:</strong> Make “service operations” legible without pretending you have enterprise SRE.</p> <p>Approach:</p> <ul> <li>Start with a manual “Recent incidents” section on <code>/status</code> (or <code>/changelog</code> entries tagged “incident”).</li> <li>Add external uptime monitoring later (recommended by existing ops docs) and then display 30-day uptime once you have a data source you trust.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>If something breaks, you have a public place to acknowledge it (even briefly).</li> </ul> <h4 id=sub-phase-2f-monthly-impact-report-template-storage-cadence-121-day>Sub-phase 2F — Monthly Impact Report (template + storage + cadence) (½–1 day)</h4> <p><strong>Goal:</strong> Create a repeatable “proof artifact” that builds ABS verifiability over time.</p> <p>Deliverables:</p> <ul> <li>A template (web page or markdown) with these sections:</li> <li>“What’s new”</li> <li>“Coverage changes”</li> <li>“Reliability notes”</li> <li>“Usage snapshot” (only if you measure)</li> <li>“Partner/mention highlights”</li> <li>“Known limitations / next month focus”</li> </ul> <p>Storage/location:</p> <ul> <li>Keep impact reports in a stable folder (e.g., <code>docs/impact/YYYY-MM.md</code> in the frontend repo, or a dedicated section on the site).</li> <li>Link each report from <code>/changelog</code>.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>You can produce the report in under 30 minutes each month.</li> </ul> <h4 id=sub-phase-2g-documentation-runbook-updates-12-day>Sub-phase 2G — Documentation + runbook updates (½ day)</h4> <ul> <li>Update:</li> <li>Frontend docs to mention <code>/status</code> and where its data comes from.</li> <li>Backend docs if new public endpoints or aggregation logic are introduced.</li> <li>Add a changelog entry: “Status/Metrics page launched; metrics definitions published.”</li> </ul> <h4 id=sub-phase-2h-tests-as-behavior-changes-122-days>Sub-phase 2H — Tests (as behavior changes) (½–2 days)</h4> <ul> <li>Frontend: add tests that <code>/status</code> renders expected sections (and handles “backend unreachable” gracefully).</li> <li>Backend (only if Option D2 is implemented): add tests that aggregates update correctly and do not store PII.</li> </ul> <p><strong>Definition of done (Phase 2, detailed)</strong></p> <ul> <li>A public <code>/status</code> page exists and answers: “Is it up? what’s covered? how current? what are the limitations?”</li> <li>Metric definitions are published and consistent with <code>/privacy</code>.</li> <li>If usage is measured, it is aggregated and privacy-preserving; if not, that is explicitly stated.</li> <li>A monthly impact report template exists and is linked from <code>/changelog</code>.</li> </ul> <p><strong>Status (Phase 2 implementation)</strong></p> <ul> <li>Implemented on 2025-12-21.</li> <li>Added <code>/status</code> and <code>/impact</code> pages to the frontend.</li> <li>Added <code>/api/usage</code> to the backend with daily aggregate counts (search, snapshot detail, raw snapshot, reports).</li> <li>Enabled/controlled via backend env: <code>HEALTHARCHIVE_USAGE_METRICS_ENABLED</code> and <code>HEALTHARCHIVE_USAGE_METRICS_WINDOW_DAYS</code>.</li> <li>Updated <code>/privacy</code> to disclose aggregate usage counts.</li> <li>Added a baseline impact report and changelog entry for Phase 2.</li> </ul> <hr> <h2 id=phase-3-change-tracking-compare-digest-expanded>Phase 3 — Change Tracking + Compare + Digest (expanded)</h2> <h3 id=why-this-matters_3>Why this matters</h3> <p>Without change tracking, HealthArchive answers “what did it say?” but not “what changed?”. Change tracking is the primary upgrade that drives:</p> <ul> <li>repeat visits,</li> <li>subscriber growth,</li> <li>and research/journalism use (audit trails).</li> </ul> <h3 id=what-already-exists-that-should-be-leveraged>What already exists that should be leveraged</h3> <ul> <li><strong>Canonical page grouping:</strong> <code>normalized_url_group</code> and the optional <code>pages</code> table (<code>healtharchive-backend/src/ha_backend/models.py</code>).</li> <li><strong>Content hashing:</strong> snapshots already store <code>content_hash</code> (SHA-256 of body bytes) (<code>healtharchive-backend/src/ha_backend/indexing/mapping.py</code>).</li> <li>This is a powerful “cheap change detector” before doing expensive diffs.</li> <li><strong>Search modes:</strong> <code>view=pages</code> vs <code>view=snapshots</code> and strong filtering semantics (<code>healtharchive-backend/docs/architecture.md</code>).</li> <li><strong>UI foundations:</strong> snapshot and browse views already handle provenance, replay/raw fallback, and edition switching.</li> </ul> <h3 id=what-change-tracking-must-not-be>What “change tracking” must not be</h3> <ul> <li>It must not read like medical interpretation.</li> <li>It must not summarize in a way that implies “this means you should…”.</li> <li>It must not depend on heavy compute during normal user requests.</li> </ul> <h3 id=deliverables-conceptual>Deliverables (conceptual)</h3> <p>1) <strong>Page timeline</strong> - For a given “page group,” show the list of captures over time (dates, editions/jobs). - User can select two captures to compare.</p> <p>2) <strong>Compare view</strong> - Show two versions (A and B) with clear provenance: timestamps, source, URL, edition/job. - Provide a descriptive diff: - “Added/removed/changed” section counts - Highlight textual changes - Explicitly label “high-noise” pages when appropriate</p> <p>3) <strong>Changes feed</strong> - A feed of recent change events, filterable by: - source, - date range, - (optional later) mechanical tags (avoid editorial topics early)</p> <p>4) <strong>Digest</strong> - Weekly digest published as: - web page archive, - RSS feed, - email later (if desired).</p> <h3 id=practical-meaningful-change-policy-examples>Practical “meaningful change” policy (examples)</h3> <p>Meaningful changes might include: - Headings/sections added/removed - Guidance text changed in paragraphs or lists - Tables updated (when text extraction can detect it)</p> <p>Not meaningful (or “low signal”) changes include: - cookie banners, - global nav, - timestamps “last updated” in page chrome, - minor layout/whitespace shifts.</p> <h3 id=suggested-approach-still-no-code>Suggested approach (still no code)</h3> <p>Use a staged pipeline so you don’t compute diffs unnecessarily:</p> <p>1) Detect change candidates: - If <code>content_hash</code> differs between successive captures for the same page group, it’s a candidate. 2) Generate a “readable text representation”: - Normalize HTML to text with noise reduction rules. 3) Produce diff artifacts: - Store enough to render compare views and feeds quickly. 4) Surface the output in UI: - Compare page, timeline page, changes feed, digest feed.</p> <h3 id=user-facing-copy-examples-guardrail-language>User-facing copy examples (guardrail language)</h3> <p>Compare page disclaimer:</p> <blockquote> <p>This comparison highlights <strong>text changes</strong> between two archived captures. It does not interpret the change or provide guidance. For current recommendations, consult the official source website.</p> </blockquote> <p>Digest disclaimer:</p> <blockquote> <p>This digest lists pages whose <strong>archived text changed</strong> during the period. It is not clinical guidance and may include formatting or boilerplate changes.</p> </blockquote> <h3 id=acceptance-criteria_2>Acceptance criteria</h3> <ul> <li>A user can answer “what changed since the last edition (or between editions)?” without manual searching.</li> <li>Compare output is descriptive, provenance-rich, and clearly non-authoritative.</li> <li>Heavy processing happens off the request path (no slow compare pages that compute diffs live).</li> </ul> <h3 id=phase-3-implementation-plan-detailed-sub-phases>Phase 3 Implementation Plan (Detailed; sub-phases)</h3> <p>Phase 3 turns HealthArchive from “a searchable archive” into “a living audit tool”. The goal is to let a user answer: <strong>what changed, when, and between which captures</strong> — without implying medical interpretation.</p> <h4 id=design-principles-phase-3>Design principles (Phase 3)</h4> <ul> <li><strong>Descriptive only:</strong> show <em>text diffs</em>, not “meaning” or “recommendations”.</li> <li><strong>Provenance-first:</strong> every change event must be anchored to two snapshot IDs (A → B) with timestamps and the source URL/group.</li> <li><strong>No heavy work on requests:</strong> diff computation must happen in background/ops workflows, not inside normal page loads.</li> <li><strong>Noise-aware:</strong> explicitly label high-noise pages and avoid overconfident summaries.</li> <li><strong>Versioned methodology:</strong> store a <code>diff_version</code>/<code>normalization_version</code> so later improvements don’t silently rewrite history.</li> <li><strong>Scope fits the annual edition model:</strong> a user should still get value even when captures are annual (timeline + compare remain useful even if “weekly changes” are sparse).</li> </ul> <h4 id=sub-phase-3a-define-change-events-and-user-stories-121-day>Sub-phase 3A — Define “change events” and user stories (½–1 day)</h4> <p>Define the minimum set of user-facing questions and map each to an artifact:</p> <ul> <li><strong>Timeline:</strong> “Show me all captures for this page over time.” → <em>page timeline dataset</em></li> <li><strong>Compare:</strong> “Show changes between capture A and B.” → <em>diff artifact for (A,B)</em></li> <li><strong>Recent changes:</strong> “What changed recently?” → <em>changes feed over computed events</em></li> <li><strong>Digest:</strong> “Summarize changes for a period.” → <em>web + RSS output derived from the feed</em></li> </ul> <p>Also define change types and guardrails:</p> <ul> <li><code>updated</code> (content changed between two captures)</li> <li><code>unchanged</code> (hash identical; no diff needed)</li> <li><code>new_page</code> (first-ever capture for a page group)</li> <li><code>removed_page</code> (optional; requires edition-to-edition set comparison)</li> <li><code>error</code> (diff could not be computed; still track the event)</li> </ul> <p>Deliverable: a short “Phase 3 semantics” section (internal) that is used consistently in API/UI copy.</p> <h4 id=sub-phase-3b-data-model-migration-plan-12-days>Sub-phase 3B — Data model + migration plan (1–2 days)</h4> <p>Create a minimal, future-proof storage model for change tracking:</p> <ul> <li><strong>Snapshot pair anchor:</strong> store <code>from_snapshot_id</code> and <code>to_snapshot_id</code> (or <code>a_snapshot_id</code>/<code>b_snapshot_id</code>).</li> <li><strong>Page anchor:</strong> store <code>source_id</code> + <code>normalized_url_group</code> (and/or <code>page_id</code> if you choose to make pages mandatory).</li> <li><strong>Summary fields (fast feed rendering):</strong></li> <li>timestamps, diff size signals (e.g., “changed characters”, “changed sections count”),</li> <li>coarse “noise score” / “high-noise” boolean,</li> <li>short, descriptive “what changed” sentence that never implies interpretation (e.g., “3 sections changed; 2 added; 1 removed”).</li> <li><strong>Diff artifact fields (for compare rendering):</strong></li> <li>a rendered HTML diff or structured diff blocks,</li> <li>optional “section list” for navigation.</li> <li><strong>Version fields:</strong> <code>diff_version</code>, <code>normalization_version</code>, <code>computed_at</code>, <code>computed_by</code>.</li> </ul> <p>Deliverable: one Alembic migration introducing change-event storage (plus indexes needed for feeds and timelines).</p> <h4 id=sub-phase-3c-change-detection-pipeline-background-compute-25-days>Sub-phase 3C — Change detection pipeline (background compute) (2–5 days)</h4> <p>Build a staged pipeline that minimizes work:</p> <p>1) <strong>Identify candidates cheaply</strong> - Use existing <code>normalized_url_group</code> + <code>capture_timestamp</code> ordering to find “adjacent captures”. - Use <code>content_hash</code> to classify <code>unchanged</code> vs <code>candidate</code> (skip expensive diff when hashes match). 2) <strong>Normalize HTML to “diffable text”</strong> - Reuse the project’s text extraction approach where possible. - Add noise-reduction rules (e.g., drop headers/footers/nav/cookie banners/“last updated” chrome where detectable). 3) <strong>Compute diff</strong> - Produce a human-readable diff with stable formatting. - Emit “summary stats” (counts only, no interpretations). 4) <strong>Persist artifacts</strong> - Store event row + (optional) rendered diff artifact for fast compare pages.</p> <p>Operational requirement: the pipeline must be <strong>idempotent</strong>, resumable, and rate-limited so it doesn’t overwhelm the VPS after big crawls.</p> <p>Deliverables:</p> <ul> <li>A command or background task that computes diffs for:</li> <li>“newly indexed snapshots”, and</li> <li>a backfill range (for existing data).</li> <li>A consistent way to measure backlog and error rate (even if only as counts).</li> </ul> <h4 id=sub-phase-3d-public-api-contract-13-days>Sub-phase 3D — Public API contract (1–3 days)</h4> <p>Expose a public-only contract that supports UI and research workflows:</p> <ul> <li><strong>Changes feed endpoint</strong></li> <li>filterable by source, date range, and (optionally) URL/group.</li> <li>supports pagination.</li> <li>returns summary + provenance fields (snapshot IDs A/B, timestamps, source, URL/group).</li> <li><strong>Compare endpoint</strong></li> <li>fetch a diff artifact for two snapshots (or a precomputed diff ID).</li> <li>returns:<ul> <li>provenance,</li> <li>summary stats,</li> <li>diff content (renderable).</li> </ul> </li> <li><strong>Page timeline endpoint</strong></li> <li>list captures for a given URL group (or snapshot ID → group resolution).</li> <li>enables UI selection of A and B.</li> </ul> <p>Deliverables: updated schema docs (Pydantic) and a short API section in the backend README (public endpoints only).</p> <h4 id=sub-phase-3e-frontend-ux-timeline-compare-changes-26-days>Sub-phase 3E — Frontend UX: timeline, compare, changes (2–6 days)</h4> <p>Implement three user-facing surfaces:</p> <p>1) <strong>Changes page</strong> (<code>/changes</code>) - “Changes” feed with filters (source + date range). - Default view should be <strong>edition-aware</strong> (e.g., “changes in the latest edition” or “between edition A and B”), because the project’s default capture cadence is annual. - A “last N days” view can exist, but must be labeled as <strong>recently archived</strong> (capture time), not “recently updated by the source.” - Each entry shows: - what changed (descriptive summary), - capture timestamps (UTC labeling), - links to compare and to each snapshot. 2) <strong>Compare view</strong> (<code>/compare</code> or equivalent) - Clear A/B selection and provenance. - Diff display with: - obvious “archived content” banner, - navigation by changed sections (if available), - warnings for high-noise pages. 3) <strong>Snapshot timeline integration</strong> - On snapshot pages, add “Other captures of this page” (timeline list). - Allow selecting a second snapshot to compare.</p> <p>Guardrail copy must be present on compare and changes pages (descriptive-only; link to official sources for current guidance).</p> <h4 id=sub-phase-3f-digest-mvp-web-rss-13-days>Sub-phase 3F — Digest MVP: web + RSS (1–3 days)</h4> <p>Start with low-ops digest channels:</p> <ul> <li><strong>Digest index page</strong> (<code>/digest</code>)</li> <li>Explains what the digest is (a list of changed pages) and what it is not (guidance).</li> <li>Links to RSS feeds.</li> <li><strong>RSS feeds</strong></li> <li>“Global changes” RSS.</li> <li>Optional per-source RSS.</li> </ul> <p>Deliverable: a digest archive concept that doesn’t require email infrastructure yet.</p> <h4 id=sub-phase-3g-documentation-and-governance-alignment-121-day>Sub-phase 3G — Documentation and governance alignment (½–1 day)</h4> <p>Update public-facing docs to match the new capability:</p> <ul> <li>Methods/governance text explaining:</li> <li>what “change tracking” means,</li> <li>limitations (noise, missing captures, replay limitations),</li> <li>“descriptive only” stance.</li> <li>Researcher guidance:</li> <li>how to cite a compare view (A and B snapshot IDs + timestamps).</li> </ul> <h4 id=sub-phase-3h-tests-performance-gates-13-days>Sub-phase 3H — Tests + performance gates (1–3 days)</h4> <p>Add tests that protect the core promise:</p> <ul> <li>Backend:</li> <li>candidate detection logic (hash match skips diff),</li> <li>changes feed pagination and filtering,</li> <li>compare endpoint returns stable provenance,</li> <li>disabled modes (feature flag off) behave predictably.</li> <li>Frontend:</li> <li><code>/changes</code> renders with mocked API data,</li> <li>compare view renders provenance and disclaimer,</li> <li>graceful behavior when API is unavailable (fallback messaging).</li> </ul> <p>Performance gates:</p> <ul> <li>No compare request should trigger heavy diff computation synchronously.</li> <li>Feed endpoints should be index-backed and fast for large datasets.</li> </ul> <p><strong>Status (Phase 3 implementation)</strong></p> <ul> <li>Implemented on 2025-12-22.</li> <li>Added a <code>snapshot_changes</code> table and precomputed diff artifacts.</li> <li>Introduced <code>ha-backend compute-changes</code> for backfill + incremental diffing.</li> <li>Added public APIs: <code>/api/changes</code>, <code>/api/changes/compare</code>, <code>/api/changes/rss</code>, <code>/api/snapshots/{id}/timeline</code>.</li> <li>Enabled/controlled via backend env: <code>HEALTHARCHIVE_CHANGE_TRACKING_ENABLED</code> (API surfaces) and <code>/etc/healtharchive/change-tracking-enabled</code> (systemd timer gate).</li> <li>Added frontend pages <code>/changes</code>, <code>/compare</code>, <code>/digest</code> plus snapshot timeline UX.</li> <li>Updated governance/methods/researcher copy and changelog to reflect change tracking.</li> <li>Added systemd timer templates for scheduled change tracking runs (see <code>docs/deployment/systemd/README.md</code>).</li> </ul> <hr> <h2 id=phase-4-distribution-external-validation-expanded>Phase 4 — Distribution + External Validation (expanded)</h2> <h3 id=why-this-matters_4>Why this matters</h3> <p>External validation is the “credibility multiplier”:</p> <ul> <li>It makes the project verifiable to outsiders.</li> <li>It reduces “this is just a personal project” framing.</li> <li>It provides sustainable feedback loops (what’s useful vs noise).</li> </ul> <h3 id=deliverables_1>Deliverables</h3> <p>1) <strong>Partner target list (10 targets is enough)</strong> - Libraries/archives (digital scholarship) - Journalism programs/labs - Public health research groups - Educator networks (critical appraisal / evidence communication)</p> <p>2) <strong>Partner pitch assets</strong> - One-page brief (mission + disclaimers + what they get) - Screenshot pack (search, snapshot, compare, digest) - “How to cite a snapshot” guidance</p> <p>3) <strong>Distribution mechanism</strong> - Lowest friction: RSS feeds (digest, per-source changes) - Next: embed widget for “recent changes”</p> <p>4) <strong>Verifier strategy</strong> - One credible person willing to attest to: - your role, - the project’s utility, - and (ideally) how they used it.</p> <h3 id=acceptance-criteria_3>Acceptance criteria</h3> <ul> <li>At least one external partner links or embeds.</li> <li>At least one named verifier agrees (with permission) to validate your role and impact.</li> </ul> <hr> <h3 id=phase-4-implementation-plan-detailed-sub-phases>Phase 4 Implementation Plan (Detailed; sub-phases)</h3> <p>Phase 4 is intentionally <strong>mostly non-code</strong>. The outputs that “count” are public artifacts and third-party confirmations (links/embeds, emails/letters, citations/mentions) rather than features.</p> <h4 id=design-principles-phase-4>Design principles (Phase 4)</h4> <ul> <li><strong>Distribution before complexity.</strong> Prefer RSS + “link to <code>/changes</code>” over building bespoke widgets.</li> <li><strong>No medical interpretation.</strong> Partners should be distributing an archive/change log, not “recommendations”.</li> <li><strong>Permission + accuracy.</strong> Never list a partner or verifier publicly without explicit permission and a reviewed description.</li> <li><strong>Privacy by default.</strong> Do not collect or store partner contact details in the repo. Keep outreach tracking private.</li> <li><strong>Evidence-first.</strong> Every claimed partnership should have a “proof artifact” you can show (screenshot, published link, email permission).</li> </ul> <h4 id=sub-phase-4a-define-target-partners-selection-criteria-121-day>Sub-phase 4A — Define target partners + selection criteria (½–1 day)</h4> <p><strong>Goal:</strong> A small, realistic list of targets you can actually contact and close.</p> <p>Decide:</p> <ul> <li>The <strong>primary distribution channel</strong> for Phase 4 (recommended): the <code>/digest</code> RSS feeds (global + per-source).</li> <li>The <strong>default “ask”</strong> (keep it easy): “Please link to HealthArchive’s digest/changes page as a resource for reproducibility and auditability.”</li> <li>Partner “tiers” (avoid overpromising):</li> <li><strong>Distribution partner:</strong> links to <code>/digest</code> or <code>/changes</code>, or republishes the RSS feed in a resource page.</li> <li><strong>Review partner:</strong> provides occasional feedback on governance/scope wording (informal advisory).</li> <li><strong>Research/teaching partner:</strong> uses it in a class/lab project and is willing to be named (optional; high value).</li> </ul> <p>Selection criteria for the initial list (use as a filter):</p> <ul> <li>Audience overlap with HealthArchive (research methods, journalism, digital scholarship, evidence communication).</li> <li>Ability to “say yes” quickly (a librarian maintaining a LibGuides page, a lab website admin, a newsletter editor).</li> <li>Comfort with the “archive, not guidance” framing.</li> <li>Willingness to be publicly named and/or verify use.</li> </ul> <p>Deliverables:</p> <ul> <li>A private “Top 10 targets” list with:</li> <li>org name, relevant program/page, role/title to contact,</li> <li>one sentence: why they are a fit,</li> <li>one sentence: what you’re asking them to do,</li> <li>the lowest-friction next step (email vs warm intro vs office hours).</li> </ul> <p>Proof artifacts (later):</p> <ul> <li>Screenshot or archived copy of their page once they link/mention it.</li> </ul> <h4 id=sub-phase-4b-build-partner-ready-assets-12-days>Sub-phase 4B — Build partner-ready assets (1–2 days)</h4> <p><strong>Goal:</strong> Remove friction for adoption and prevent misinterpretation.</p> <p>Create (minimum viable kit):</p> <p>1) <strong>One-page brief</strong> (PDF or web page) - “What it is” in 2 sentences (archive + timestamped change tracking). - “What it is not” (not medical advice; not current guidance; not affiliated). - Who it is for (researchers/journalists/educators first). - Links: <code>/methods</code>, <code>/governance</code>, <code>/status</code>, <code>/impact</code>, <code>/digest</code>, <code>/changes</code>. - A small “project snapshot” box: sources tracked, snapshots, latest capture date.</p> <p>2) <strong>Screenshot pack</strong> (5–8 images) - Home + “What this is/isn’t” - Archive search page - Snapshot page metadata + report link - Changes feed (<code>/changes</code>) - Compare view (<code>/compare?to=&lt;real id&gt;</code>) showing “descriptive only” - Digest page (<code>/digest</code>) with RSS links - Status/Impact pages (optional but persuasive)</p> <p>3) <strong>“How to cite” handout</strong> (1 page) - Snapshot citation format (already present on <code>/researchers</code>; refine into a stable standalone artifact). - Compare citation format (two snapshot IDs + timestamps + compare URL). - A clear disclaimer that citations refer to archived content, not current guidance.</p> <p>4) <strong>Outreach email templates</strong> (plain text) - One initial email template per partner tier (distribution vs research/teaching). - A 2–3 sentence “elevator pitch” that avoids adversarial language (“auditability” rather than “accountability attack”).</p> <p>Rules:</p> <ul> <li>Do not include private emails/phone numbers in repo artifacts.</li> <li>Do not include claims like “widely used” until you can support them with numbers/partners.</li> </ul> <p>Deliverables location guidance:</p> <ul> <li>Public-facing, non-sensitive assets can live in the repo (docs folder) if you want versioning.</li> <li>Contact lists and outreach logs should stay private (not committed).</li> </ul> <h4 id=sub-phase-4c-outreach-workflow-tracking-12-weeks-ongoing>Sub-phase 4C — Outreach workflow + tracking (1–2 weeks, ongoing)</h4> <p><strong>Goal:</strong> Run outreach like a small operational process, not ad-hoc messages.</p> <p>Suggested workflow:</p> <p>1) Identify 3 “warmest” targets (fastest to yes). 2) Send the initial email with: - one-page brief link/attachment, - link to <code>/digest</code> and <code>/changes</code>, - one specific ask, - one low-effort follow-up option (“If helpful, I can send a 2-minute screencast or hop on a 15-minute call.”). 3) Track each outreach attempt privately: - date sent, response, follow-up dates, outcome. 4) Follow-up cadence: - 7 days after initial email, - 14 days after initial email (final polite close).</p> <p>Example “distribution ask” (keep it concrete):</p> <ul> <li>“Would you be willing to add HealthArchive.ca to your digital scholarship/public health methods resources page, linking to the digest (<code>/digest</code>) or the changes feed (<code>/changes</code>)? The site is explicitly non-authoritative and is intended for reproducibility and auditability.”</li> </ul> <p>Proof artifacts (save for ABS/verifiers):</p> <ul> <li>Email thread granting permission to be listed (even a short “Yes, you can list us” reply).</li> <li>Screenshot of the published link on their site (with date).</li> </ul> <h4 id=sub-phase-4d-partner-onboarding-12-day-per-partner>Sub-phase 4D — Partner onboarding (½ day per partner)</h4> <p><strong>Goal:</strong> Make “yes” immediately turn into public evidence, with minimal partner burden.</p> <p>Distribution options (in order):</p> <p>1) Link to <code>/digest</code> (RSS + explainer). 2) Link to <code>/changes</code> (edition-aware changes feed). 3) Optional: partner adds the RSS feed to their own page/newsletter tooling.</p> <p>What you provide back:</p> <ul> <li>A short “How to use this resource” blurb they can paste (includes disclaimers).</li> <li>The exact RSS URL(s) for global/per-source feeds.</li> <li>A suggested citation sentence: “This is an archival record; verify current guidance on the official source.”</li> </ul> <p>What you avoid:</p> <ul> <li>Anything that looks like endorsement or clinical guidance.</li> <li>Anything requiring ongoing support (custom widgets, per-partner deployments) until you have bandwidth.</li> </ul> <h4 id=sub-phase-4e-verifier-strategy-verification-packet-121-day>Sub-phase 4E — Verifier strategy + verification packet (½–1 day)</h4> <p><strong>Goal:</strong> Make it easy for one credible person to verify your role and the project’s use/impact.</p> <p>Identify one verifier candidate (examples):</p> <ul> <li>librarian/archivist in digital scholarship,</li> <li>public health researcher supervising a methods project,</li> <li>journalism faculty/editor using the resource in a workflow.</li> </ul> <p>Build a small “verification packet” (shareable link or PDF):</p> <ul> <li>Mission + safety posture (one paragraph).</li> <li>What you built (high-level architecture, no sensitive infrastructure details).</li> <li>What is live now (key pages + APIs).</li> <li>Metrics snapshot (from <code>/status</code> + <code>/impact</code>).</li> <li>What you do operationally (annual capture policy + change tracking cadence).</li> <li>A short role summary (what you personally did; keep it factual).</li> </ul> <p>Ask the verifier explicitly:</p> <ul> <li>“Are you willing to verify that I built and operate this project and that it has been useful for X purpose?”</li> <li>“May I list your name/title as a verifier (with your preferred wording)?”</li> </ul> <p>Proof artifact:</p> <ul> <li>Written confirmation (email is sufficient) saved privately.</li> </ul> <h4 id=sub-phase-4f-mentionscitations-capture-ongoing-15-minmonth>Sub-phase 4F — Mentions/citations capture (ongoing; 15 min/month)</h4> <p><strong>Goal:</strong> Build an evidence trail without invasive analytics.</p> <p>Keep a lightweight, public “mentions log” (can be a section in the changelog or impact report):</p> <ul> <li>date, outlet/org, link, one-sentence context.</li> </ul> <p>Ways to find mentions (non-invasive):</p> <ul> <li>manual search for “healtharchive.ca” occasionally,</li> <li>direct partner updates (“we added you to our resources page”),</li> <li>optional: set up alerts outside the repo (do not commit credentials).</li> </ul> <h4 id=sub-phase-4g-phase-4-definitions-of-done-make-success-measurable>Sub-phase 4G — Phase 4 definitions of done (make success measurable)</h4> <p>Minimum viable “Phase 4 complete”:</p> <ul> <li>1 distribution partner publicly links to <code>/digest</code> or <code>/changes</code> (with permission to name them).</li> <li>1 verifier agrees (with permission) to verify your role and describe the project’s utility.</li> <li>1 impact report includes the above as “Partner highlights” with links.</li> </ul> <p>Stretch goals (high value if feasible):</p> <ul> <li>1 course/lab/student project uses the data and is willing to be named.</li> <li>1 external mention in a newsletter/blog post/paper.</li> </ul> <p><strong>Status (Phase 4 assets implemented)</strong></p> <ul> <li>Public one-page brief page: <code>https://www.healtharchive.ca/brief</code> (downloadable Markdown at <code>/partner-kit/healtharchive-brief.md</code>)</li> <li>Public citation guidance page: <code>https://www.healtharchive.ca/cite</code> (downloadable Markdown at <code>/partner-kit/healtharchive-citation.md</code>)</li> <li>Partner kit draft: <code>healtharchive-backend/docs/operations/partner-kit.md</code></li> <li>One-page brief (source copy): <code>healtharchive-backend/docs/operations/one-page-brief.md</code></li> <li>Citation handout (source copy): <code>healtharchive-backend/docs/operations/citation-handout.md</code></li> <li>Outreach templates: <code>healtharchive-backend/docs/operations/outreach-templates.md</code></li> <li>Verification packet outline: <code>healtharchive-backend/docs/operations/verification-packet.md</code></li> <li>Mentions log template: <code>healtharchive-backend/docs/operations/mentions-log-template.md</code></li> </ul> <p>Remaining Phase 4 work is outreach and external validation.</p> <h2 id=phase-5-research-grade-outputs-expanded>Phase 5 — Research-Grade Outputs (expanded)</h2> <h3 id=why-this-matters_5>Why this matters</h3> <p>HealthArchive’s strongest natural audience is research/journalism. Making it “research-grade” increases:</p> <ul> <li>citations/mentions,</li> <li>reuse in student projects,</li> <li>and the credibility of the archive as an artifact.</li> </ul> <h3 id=what-already-exists_2>What already exists</h3> <ul> <li>A public citation page exists (<code>/cite</code>) and is linked from <code>/researchers</code>.</li> <li>Change tracking exists (edition-aware <code>/changes</code>, <code>/compare</code>, <code>/digest</code> with RSS).</li> <li>Backend exposes stable, structured APIs for search, sources, snapshots, timeline, and changes.</li> </ul> <h3 id=design-principles-phase-5>Design principles (Phase 5)</h3> <ul> <li><strong>Research-first, not “consumer guidance.”</strong> Optimize for reproducibility, auditability, and stable references.</li> <li><strong>No medical interpretation.</strong> Outputs are descriptive and methodological; avoid “what this means medically.”</li> <li><strong>No personal data.</strong> Exports must not include IP addresses, emails, user agents, or raw report submissions.</li> <li><strong>Stable identifiers + clear versioning.</strong> Prefer durable URLs and explicit “edition” framing over “latest” unless carefully labeled.</li> <li><strong>Sustainable access.</strong> Default to lightweight endpoints and cached/exported files; heavy requests go through a human workflow first.</li> <li><strong>Public methods + limitations.</strong> Avoid overclaiming completeness or authoritative status.</li> </ul> <h3 id=phase-5-implementation-plan-detailed-sub-phases>Phase 5 Implementation Plan (Detailed; sub-phases)</h3> <p>Phase 5 has two parallel goals:</p> <p>1) make HealthArchive easier to cite, reuse, and defend in research/journalism, and 2) create “proof artifacts” that demonstrate sustained, measurable public-interest value.</p> <h4 id=sub-phase-5a-citation-guidance-stabilize-make-it-unambiguous>Sub-phase 5A — Citation guidance (stabilize + make it unambiguous)</h4> <p><strong>Goal:</strong> A researcher should be able to cite a snapshot or comparison correctly in under 60 seconds.</p> <p>Deliverables:</p> <ul> <li>Keep <code>/cite</code> as the canonical citation page, and ensure it covers:</li> <li>snapshot citations,</li> <li>compare-view citations (two snapshot IDs + both capture timestamps),</li> <li>a short “fields glossary” (title, original URL, capture timestamp, snapshot URL).</li> <li>Add a “How to cite” link from relevant surfaces:</li> <li><code>/snapshot/[id]</code> (near metadata)</li> <li><code>/compare</code> (near the comparison header)</li> <li><code>/changes</code> and <code>/digest</code> (as “for researchers” guidance)</li> <li>Add a lightweight citation “ready-to-copy” format (descriptive only):</li> <li>snapshot citation template populated from snapshot metadata</li> <li>compare citation template populated from both snapshot IDs/timestamps</li> </ul> <p>Non-goals / guardrails:</p> <ul> <li>Do not suggest citation formats that imply endorsement or “official guidance.”</li> <li>Do not add any user tracking to measure citations; citations are measured by mentions/logs.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Citation formats match the site’s actual stable URLs and timestamps (UTC).</li> <li>A neutral user can follow the instructions without needing to infer missing fields.</li> </ul> <h4 id=sub-phase-5b-research-access-pathway-public-how-to-request-expectations>Sub-phase 5B — Research access pathway (public “how to request” + expectations)</h4> <p><strong>Goal:</strong> Make bulk/research access possible without promising infinite bandwidth or completeness.</p> <p>Deliverables:</p> <ul> <li>A public “Research access” section (could live on <code>/researchers</code> or a new <code>/research</code> page) that states:</li> <li>what data is available today (UI + public API endpoints + exports when available),</li> <li>what isn’t available yet (and why),</li> <li>how to request bulk access or a targeted export (email or a structured request form),</li> <li>sustainability constraints (rate limits, caching, reasonable use).</li> <li>A standardized request checklist (for the requester to provide):</li> <li>source(s) and date range(s),</li> <li>whether they want per-snapshot vs per-page grouping,</li> <li>whether they want “edition-to-edition” changes or within-edition diffs,</li> <li>intended use (paper, class project, journalism piece).</li> </ul> <p>Examples (plain-language):</p> <ul> <li>“I need all Health Canada snapshots between Apr 1–May 1, 2025, plus change events between editions.”</li> <li>“I need diffs for these 25 URLs and the two most recent captures of each.”</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Someone unfamiliar with the codebase can understand how to request research access and what they’ll receive.</li> </ul> <h4 id=sub-phase-5c-machine-readable-exports-metadata-first-then-diffs>Sub-phase 5C — Machine-readable exports (metadata first, then diffs)</h4> <p><strong>Goal:</strong> Provide research-friendly data without turning the public API into an unbounded bulk download service.</p> <p><strong>Recommended defaults (decisions)</strong></p> <ul> <li><strong>Canonical format:</strong> <code>JSON Lines</code> (<code>.jsonl</code>) compressed with <code>gzip</code> (<code>.jsonl.gz</code>)</li> <li>Why: streamable, append-friendly, handles optional fields cleanly, works well for large datasets, and is robust to schema evolution.</li> <li><strong>Convenience format:</strong> <code>CSV</code> compressed with <code>gzip</code> (<code>.csv.gz</code>) (supported by the export API; dataset releases currently publish JSONL only)</li> <li>Why: easy for non-programmers (Excel/R), still compact when gzipped.</li> <li><strong>Release packaging:</strong> always include a small <code>manifest.json</code> alongside exports</li> <li>Why: makes releases citable and reproducible (schema version, date ranges, source list, row counts, checksums).</li> <li><strong>No raw content by default:</strong> exclude full <code>diff_html</code> and raw snapshot HTML from exports</li> <li>Why: keeps exports lightweight and reduces misuse risk; raw content stays accessible via the UI and specific snapshot URLs.</li> </ul> <p>Export tiers (recommended):</p> <ul> <li>Tier 0 (public, lightweight, always on):</li> <li>Snapshot metadata export (no raw HTML content).</li> <li>Change event export (no full diff bodies unless already computed and safe to expose).</li> <li>Clear schema/field definitions (“data dictionary”).</li> <li>Tier 1 (public, cached files):</li> <li>Pre-generated exports per edition or per month, hosted as static files.</li> <li>Tier 2 (by request):</li> <li>Larger custom exports prepared offline for a study/class/journalism project.</li> </ul> <p>Deliverables:</p> <ul> <li>Define a stable export schema (same field names across <code>.jsonl</code> and <code>.csv</code>):</li> <li><strong>Snapshots export (minimum viable)</strong><ul> <li><code>snapshot_id</code></li> <li><code>source_code</code>, <code>source_name</code></li> <li><code>captured_url</code> (as archived)</li> <li><code>normalized_url_group</code> (canonical grouping key)</li> <li><code>capture_timestamp_utc</code> (ISO-8601, UTC)</li> <li><code>language</code>, <code>status_code</code>, <code>mime_type</code></li> <li><code>title</code> (optional but recommended)</li> <li><code>job_id</code>, <code>job_name</code> (edition anchor)</li> <li><code>snapshot_url</code> (absolute; e.g., <code>https://www.healtharchive.ca/snapshot/123</code>)</li> </ul> </li> <li><strong>Changes export (minimum viable)</strong><ul> <li><code>change_id</code></li> <li><code>source_code</code>, <code>source_name</code></li> <li><code>normalized_url_group</code></li> <li><code>from_snapshot_id</code>, <code>to_snapshot_id</code></li> <li><code>from_capture_timestamp_utc</code>, <code>to_capture_timestamp_utc</code></li> <li><code>from_job_id</code>, <code>to_job_id</code></li> <li><code>change_type</code>, <code>summary</code></li> <li><code>added_sections</code>, <code>removed_sections</code>, <code>changed_sections</code></li> <li><code>added_lines</code>, <code>removed_lines</code>, <code>change_ratio</code></li> <li><code>high_noise</code>, <code>diff_truncated</code></li> <li><code>diff_version</code>, <code>normalization_version</code>, <code>computed_at_utc</code></li> <li><code>compare_url</code> (absolute; e.g., <code>https://www.healtharchive.ca/compare?from=…&amp;to=…</code>)</li> </ul> </li> <li>Add a “data dictionary” page in docs and link to it from the export endpoint and <code>/researchers</code>.</li> <li>Add clear limitations:</li> <li>coverage depends on scope rules and capture success,</li> <li>replay fidelity varies,</li> <li>change tracking reflects what was captured, not what changed on the source site in real time.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Exports are stable, documented, and do not expose personal data or admin-only fields.</li> <li>Exports are edition-aware by default, to avoid misleading “recent changes” claims.</li> </ul> <h4 id=sub-phase-5d-dataset-releases-versioned-citable-artifacts>Sub-phase 5D — Dataset releases (versioned, citable artifacts)</h4> <p><strong>Goal:</strong> Create periodic “research objects” that can be cited and referenced over time.</p> <p><strong>Current decisions (implemented)</strong></p> <ul> <li><strong>Where to publish:</strong> GitHub Releases in <code>jerdaw/healtharchive-datasets</code></li> <li>Why: stable URLs for citation + straightforward distribution.</li> <li><strong>Release cadence:</strong> quarterly (Jan/Apr/Jul/Oct) via GitHub Actions (plus a keepalive workflow to avoid schedule auto-disable)</li> <li>Why: matches annual-edition reality and keeps ops low-touch.</li> <li><strong>Release contents (metadata-only):</strong> <code>healtharchive-snapshots.jsonl.gz</code>, <code>healtharchive-changes.jsonl.gz</code>, <code>manifest.json</code>, <code>SHA256SUMS</code> (no CSV)</li> <li>Why: lean artifacts with reproducible integrity metadata (checksums + manifest).</li> <li><strong>Release tags:</strong> <code>healtharchive-dataset-YYYY-MM-DD</code></li> <li>Why: date-based tags allow finer cadence later without renaming history.</li> </ul> <p>Deliverables:</p> <ul> <li>A simple release cadence (quarterly) for:</li> <li>snapshot metadata dumps,</li> <li>change event dumps,</li> <li>stable release artifacts with checksums + manifest.</li> <li>Versioning approach:</li> <li><code>healtharchive-dataset-YYYY-MM-DD</code> with checksums.</li> <li>A release checklist:</li> <li>schema version,</li> <li>date range included,</li> <li>source list included,</li> <li>checksums generated,</li> <li>known limitations noted.</li> </ul> <p>Where to publish:</p> <ul> <li>Prefer GitHub Releases (with checksums) or a dedicated static dataset page, depending on file sizes and operational comfort.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A researcher can cite “Dataset release YYYY-MM-DD” and reproduce the exact file they used.</li> </ul> <h4 id=sub-phase-5e-methods-note-poster-scholarship-output>Sub-phase 5E — Methods note / poster (scholarship output)</h4> <p><strong>Goal:</strong> Produce one scholarly artifact that is methodological and defensible.</p> <p>Recommended topic framing (non-interpretive):</p> <ul> <li>“A provenance-first pipeline for archiving Canadian public health webpages.”</li> <li>“Edition-aware change tracking for public health web guidance: methods and limitations.”</li> </ul> <p>Deliverables:</p> <ul> <li>A methods note outline with:</li> <li>motivation (reproducibility + auditability),</li> <li>capture methodology (WARCs + indexing),</li> <li>provenance labeling policy,</li> <li>change tracking approach (normalization + diff),</li> <li>limitations and non-goals (not guidance, not medical advice),</li> <li>ethics/privacy posture (no PHI; aggregated usage metrics only),</li> <li>a small descriptive results section (counts and examples, not interpretation).</li> <li>A “figure plan”:</li> <li>architecture diagram (high-level),</li> <li>example change timeline for a single URL,</li> <li>coverage table (sources + capture windows).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>The artifact can be shared publicly without creating medical guidance liability.</li> </ul> <h4 id=sub-phase-5f-measurability-research-adoption-signals>Sub-phase 5F — Measurability (research adoption signals)</h4> <p><strong>Goal:</strong> Collect defensible evidence that research-grade outputs are used.</p> <p>Deliverables:</p> <ul> <li>A mentions/citations log process (already templated in Phase 4) updated monthly.</li> <li>A “research use” section in monthly impact reports:</li> <li>number of research inquiries,</li> <li>number of bulk exports delivered (if any),</li> <li>any public citations/mentions (with links).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>You can point to concrete, verifiable research adoption signals without tracking individuals.</li> </ul> <h3 id=definition-of-done-phase-5>Definition of done (Phase 5)</h3> <p>Minimum viable “Phase 5 complete”:</p> <ul> <li><code>/cite</code> is canonical and linked from snapshot/compare/changes surfaces.</li> <li>A public research access pathway exists (how to request bulk access + constraints).</li> <li>A v1 export exists (snapshot metadata + change events) with a documented schema.</li> <li>One “methods note” outline exists and is ready to submit as a poster/preprint/blog-style methods write-up.</li> </ul> <p>Stretch goals:</p> <ul> <li>Versioned dataset releases on a fixed cadence (quarterly) with checksums.</li> <li>At least one external research/journalism project uses an export and can be cited in the mentions log.</li> </ul> <p><strong>Status (Phase 5 assets implemented)</strong></p> <ul> <li>Public export manifest and endpoints: <code>/api/exports</code>, <code>/api/exports/snapshots</code>, <code>/api/exports/changes</code>.</li> <li>Export endpoints support <code>HEAD</code> requests for header inspection (e.g., <code>curl -I</code>).</li> <li>Public data dictionary page: <code>https://www.healtharchive.ca/exports</code> (+ downloadable Markdown).</li> <li><code>/researchers</code> updated with research access workflow and export manifest link.</li> <li><code>/cite</code> linked from <code>/snapshot</code>, <code>/compare</code>, <code>/changes</code>, and <code>/digest</code>.</li> <li>Export schema documented in <code>healtharchive-frontend/public/exports/healtharchive-data-dictionary.md</code> (public <code>/exports</code> page).</li> <li>Methods note outline published: <code>healtharchive-backend/docs/operations/methods-note-outline.md</code>.</li> <li>Export env toggles documented (<code>HEALTHARCHIVE_EXPORTS_ENABLED</code>, defaults, and limits).</li> </ul> <p>Remaining Phase 5 work: keep quarterly dataset releases running + track external research adoption signals.</p> <hr> <h2 id=phase-6-reliability-sustainability-expanded>Phase 6 — Reliability + Sustainability (expanded)</h2> <h3 id=why-this-matters_6>Why this matters</h3> <p>You already have strong ops docs and an annual campaign definition. The upgrade here is making:</p> <ul> <li>cadence,</li> <li>constraints,</li> <li>and operational discipline</li> </ul> <p>explicit and sustainable.</p> <h3 id=what-already-exists_3>What already exists</h3> <ul> <li>Annual campaign scope and seeds (<code>healtharchive-backend/docs/operations/annual-campaign.md</code>)</li> <li>Single VPS production runbook (<code>healtharchive-backend/docs/deployment/production-single-vps.md</code>)</li> <li>Monitoring and CI checklist (<code>healtharchive-backend/docs/operations/monitoring-and-ci-checklist.md</code>)</li> <li>Optional systemd timers for annual scheduling and verification (<code>healtharchive-backend/docs/deployment/systemd/README.md</code>)</li> </ul> <h3 id=deliverables_2>Deliverables</h3> <p>1) <strong>Public capture cadence policy</strong> - Annual edition: Jan 01 UTC - Exceptions: what qualifies for ad-hoc captures - Why scope is limited (reliability &gt; breadth)</p> <p>2) <strong>Ops cadence (internal)</strong> - weekly: health review - monthly: reliability review + impact report - quarterly: restore test - routine dependency patching</p> <p>3) <strong>Growth constraints</strong> - Storage budget - Source cap per year - Performance budgets - Explicit posture on replay retention (WARCs must remain available for replay)</p> <h3 id=acceptance-criteria_4>Acceptance criteria</h3> <ul> <li>There is a clearly documented “how we operate” routine that does not require heroics.</li> <li>The public-facing cadence statement matches what you actually do.</li> </ul> <p><strong>Status (Phase 6 assets implemented)</strong></p> <ul> <li>Public cadence language updated in: <code>/methods</code>, <code>/governance</code>, <code>/changes</code>, <code>/digest</code>, <code>/status</code>.</li> <li>Internal ops cadence checklist published: <code>docs/operations/ops-cadence-checklist.md</code>.</li> <li>Growth constraints documented: <code>docs/operations/growth-constraints.md</code>.</li> <li>Restore test procedure + log template published:</li> <li><code>docs/operations/restore-test-procedure.md</code></li> <li><code>docs/operations/restore-test-log-template.md</code></li> <li>Systemd deployment guide updated with Phase 6 enablement guidance.</li> <li>Deploy helper now retries health checks during restarts to avoid transient false negatives: <code>scripts/vps-deploy.sh</code>.</li> </ul> <p>Remaining Phase 6 work: keep automation healthy (verify timers continue running) and keep quarterly restore tests running with logged results.</p> <h3 id=phase-6-implementation-plan-detailed-sub-phases>Phase 6 Implementation Plan (Detailed; sub-phases)</h3> <p>Phase 6 is mostly <strong>operationalizing</strong> what already exists: turning “we do X” into <strong>repeatable routines</strong> with lightweight artifacts so you can prove reliability over time without burning out.</p> <p>Key principle: Phase 6 is successful when it reduces cognitive load and removes “heroic memory” from operations.</p> <h4 id=sub-phase-6a-baseline-audit-inventory-decisions>Sub-phase 6A — Baseline audit (inventory + decisions)</h4> <p>Goal: ensure the cadence/scope language you publish is true, and ensure the internal routines match the system as deployed.</p> <p>Tasks:</p> <ul> <li>Inventory current reality (don’t guess):</li> <li>What cadence you actually run today (annual editions + ad-hoc).</li> <li>Which timers/automation are installed and enabled on the VPS (if any).</li> <li>What backups exist and how restore is validated today.</li> <li>What monitoring exists today (external checks, Healthchecks-style pings, logs).</li> <li>Decide what you are comfortable committing to publicly (policy that matches your capacity):</li> <li>Annual edition is the default (“Jan 01 UTC”).</li> <li>What counts as an “ad-hoc capture” exception (e.g., major event, urgent operational fix).</li> <li>Whether annual scheduling should be fully automated or remain operator-triggered.</li> <li>Decide whether “replay automation” is enabled and what the retention stance is (WARCs must remain available if replay is enabled).</li> </ul> <p>Deliverables:</p> <ul> <li>A short “Phase 6 baseline notes” section appended to the changelog (or a dated internal note) capturing the decisions above.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>You can state “what happens when” in one paragraph without contradictions.</li> </ul> <h4 id=sub-phase-6b-public-capture-cadence-policy-public-facing>Sub-phase 6B — Public capture cadence policy (public-facing)</h4> <p>Goal: publish a clear, non-misleading cadence statement that matches annual-edition reality and avoids “real-time update” impressions.</p> <p>Tasks:</p> <ul> <li>Update public copy to be explicit and consistent:</li> <li>“Annual edition captured Jan 01 UTC.”</li> <li>“Exceptions may trigger ad-hoc captures; these are explicitly labeled.”</li> <li>“Change tracking is edition-aware; it does not imply real-time monitoring.”</li> <li>Ensure the policy appears where users form expectations:</li> <li><code>/methods</code> (primary place for operational details),</li> <li><code>/governance</code> (policy + scope stance),</li> <li><code>/changes</code> + <code>/digest</code> (short, high-visibility summary),</li> <li>optionally <code>/status</code> (freshness definitions).</li> </ul> <p>Deliverables:</p> <ul> <li>Public cadence policy text (short, stable, linked from the footer or methods/governance).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A user cannot reasonably interpret “Changes” as “this is what happened this week in real time” when editions are annual.</li> </ul> <h4 id=sub-phase-6c-ops-cadence-internal-runbook-routines>Sub-phase 6C — Ops cadence (internal runbook routines)</h4> <p>Goal: define a boring, repeatable operations cadence that can be followed by you or a backup operator.</p> <p>Recommended cadence (adjust to your capacity):</p> <ul> <li>Weekly: 10–15 minute health review</li> <li>API health, worker status, disk usage trend, failed jobs queue.</li> <li>Monthly: reliability review (can be merged into the monthly impact report)</li> <li>top incidents, planned maintenance, search quality checks.</li> <li>Quarterly: restore test (prove backups are usable)</li> <li>restore DB + verify key endpoints or counts.</li> <li>Ongoing: dependency patching routine</li> <li>safe update cadence; avoid surprise upgrades during capture campaigns.</li> </ul> <p>Tasks:</p> <ul> <li>Write a single “Ops cadence checklist” doc that includes:</li> <li>what to check,</li> <li>where to look (systemd, logs, DB counts),</li> <li>how to record outcomes (a lightweight log entry).</li> <li>Decide where the “ops log” lives:</li> <li>simplest: a dated Markdown file in a private operator notes location (not necessarily in git),</li> <li>or, if public-safe, a minimal “incident log” section on <code>/impact</code> or <code>/changelog</code>.</li> </ul> <p>Deliverables:</p> <ul> <li>Internal ops cadence doc (checklist-style, copy/paste commands, no secrets).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>A future-you can follow the checklist after 3 months away and still operate safely.</li> </ul> <h4 id=sub-phase-6d-automation-gates-systemd-timers-safe-enablement>Sub-phase 6D — Automation gates (systemd timers + safe enablement)</h4> <p>Goal: enable automation only where it reduces toil without increasing risk.</p> <p>Tasks:</p> <ul> <li>Validate installed timers and dry-run services (safe-by-default):</li> <li>annual scheduling dry-run,</li> <li>change tracking dry-run,</li> <li>replay reconcile dry-run (if replay enabled),</li> <li>annual search verification (optional).</li> <li>Decide which automations to enable now vs later:</li> <li><strong>Change tracking:</strong> typically safe to keep enabled (already capped and edition-aware).</li> <li><strong>Annual scheduling:</strong> enable only after confirming job configs, disk headroom, and monitoring.</li> <li><strong>Replay reconcile:</strong> enable only if replay is enabled and stable.</li> <li>Use sentinel files to gate automation:</li> <li><code>/etc/healtharchive/automation-enabled</code> (annual scheduling),</li> <li><code>/etc/healtharchive/change-tracking-enabled</code>,</li> <li><code>/etc/healtharchive/replay-automation-enabled</code> (optional).</li> <li>Add “timer ran” visibility (optional but high leverage):</li> <li>Healthchecks-style pings using a root-owned env file on the VPS (no URLs in git).</li> </ul> <p>Deliverables:</p> <ul> <li>Updated deployment docs indicating which timers are expected to be enabled in production and why.</li> <li>A clear operator “enable automation” checklist (dry-run → enable timer → confirm next run).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>Automation does not surprise-run expensive tasks without an explicit enablement step.</li> </ul> <h4 id=sub-phase-6e-growth-constraints-budgets-boundaries>Sub-phase 6E — Growth constraints (budgets + boundaries)</h4> <p>Goal: prevent slow “scope creep” from breaking reliability (single-VPS reality).</p> <p>Tasks:</p> <ul> <li>Define and publish (internally) budgets with conservative defaults:</li> <li>storage budget (WARCs + DB + backups),</li> <li>source cap per year (how many new sources you can safely add),</li> <li>performance budget (acceptable API latency and indexing overhead),</li> <li>replay retention stance (WARCs must remain if replay is on).</li> <li>Make the public-facing version “principle based”:</li> <li>“reliability over breadth,”</li> <li>“scope is constrained by storage and operational capacity,”</li> <li>“sources are added deliberately with explicit rules.”</li> </ul> <p>Deliverables:</p> <ul> <li>Internal “budgets &amp; constraints” doc (numbers and targets).</li> <li>Public-facing summary paragraph in <code>/governance</code> (principles, not sensitive numbers).</li> </ul> <p>Acceptance criteria:</p> <ul> <li>You can answer “why not add 50 sources?” with a documented policy, not vibes.</li> </ul> <h4 id=sub-phase-6f-disaster-recovery-proof-restore-test-discipline>Sub-phase 6F — Disaster recovery proof (restore test discipline)</h4> <p>Goal: make “we have backups” verifiable by doing quarterly restore tests and recording results.</p> <p>Tasks:</p> <ul> <li>Define the quarterly restore test procedure:</li> <li>restore DB dump to a temporary/staging DB,</li> <li>run a minimal verification checklist (counts + key endpoints),</li> <li>verify that the system starts cleanly with restored state.</li> <li>Create a public-safe template for recording results (no secrets):</li> <li>date, operator, what was restored, what checks ran, pass/fail, follow-ups.</li> </ul> <p>Deliverables:</p> <ul> <li>Restore test template + documented procedure.</li> </ul> <p>Acceptance criteria:</p> <ul> <li>You can show “restore tests performed” as a reliability artifact (even if the underlying logs live privately).</li> </ul> <hr> <h2 id=appendix-a-suggested-new-public-routes-conceptual>Appendix A — Suggested new public routes (conceptual)</h2> <p>These are the most likely frontend routes to be added as part of the roadmap:</p> <ul> <li><code>/governance</code></li> <li><code>/terms</code></li> <li><code>/privacy</code></li> <li><code>/changelog</code></li> <li><code>/report</code> (issue intake)</li> <li><code>/status</code> (status/metrics)</li> <li><code>/changes</code> (changes feed)</li> <li><code>/digest</code> (digest index + archive)</li> <li><code>/page/&lt;id-or-encoded-group&gt;</code> (page timeline; exact URL design is a later decision)</li> <li><code>/compare?...</code> (compare view; exact URL design is a later decision)</li> </ul> <p>Note: the exact routing and URL formats should be designed for stability and citation friendliness.</p> <h2 id=appendix-b-monthly-impact-report-template-copy>Appendix B — Monthly impact report template (copy)</h2> <p>Suggested structure (one page):</p> <ul> <li>Summary: what HealthArchive is, what’s new this month</li> <li>Coverage: sources tracked, snapshots/pages totals, major additions</li> <li>Reliability: uptime, incidents, crawl/index success notes</li> <li>Change tracking: biggest changes (once Phase 3 exists)</li> <li>Distribution: partner highlights, mentions/citations</li> <li>Roadmap: what’s next (one paragraph)</li> </ul> <hr> <h2 id=appendix-c-statusmetrics-page-data-sources-mapping>Appendix C — Status/Metrics Page: Data Sources (mapping)</h2> <p>This appendix makes the Phase 2 “Status/Metrics page” concrete by mapping each suggested display element to existing data sources, so an implementer doesn’t invent new backend endpoints prematurely.</p> <p><strong>Data sources that are safe for the public frontend to call:</strong></p> <ul> <li><code>GET /api/health</code></li> <li>Use for “API is up / degraded” and basic counts health.</li> <li>Caveat: it’s a point-in-time check, not uptime history.</li> <li><code>GET /api/stats</code></li> <li>Use for top-level counts: snapshots, pages, sources, latest capture date.</li> <li><code>GET /api/sources</code></li> <li>Use for per-source coverage windows and record counts.</li> <li>Also provides entry points and preview URLs when replay/previews are enabled.</li> </ul> <p><strong>Data sources that must not be used from the public frontend:</strong></p> <ul> <li><code>/api/admin/**</code> and <code>/metrics</code> (admin token-protected; reserved for operators).</li> </ul> <p><strong>Recommended “status page” sections and where the data comes from:</strong></p> <ul> <li><strong>Current status:</strong> <code>/api/health</code> status + a plain-language summary of what that means.</li> <li><strong>Coverage totals:</strong> <code>/api/stats</code> + (optionally) derived counts from <code>/api/sources</code>.</li> <li><strong>Per-source coverage table:</strong> <code>/api/sources</code> fields:</li> <li>record count</li> <li>first capture date</li> <li>last capture date</li> <li>entry browse URL (if replay enabled)</li> <li>entry preview URL (if preview cache enabled)</li> </ul> <p><strong>Uptime history note:</strong></p> <p>If you want “99.9% uptime last 30 days,” it should come from an external monitor (UptimeRobot/Healthchecks/etc.) or a deliberately designed internal metric. Don’t invent uptime from <code>/api/health</code> alone.</p> <hr> <h2 id=appendix-d-changelog-template-example-entries>Appendix D — Changelog: Template + Example Entries</h2> <p>Keep the changelog boring and structured. Suggested fields per entry:</p> <ul> <li>Date (YYYY-MM-DD)</li> <li>Category tags (examples: <code>scope</code>, <code>governance</code>, <code>ui</code>, <code>search</code>, <code>replay</code>, <code>ops</code>, <code>reliability</code>, <code>data</code>)</li> <li>“What changed” (2–6 bullets)</li> <li>“Why it changed” (1–2 bullets)</li> <li>“Notes / limitations” (optional)</li> </ul> <p>Example entry (scope + UI):</p> <ul> <li>2026-02-01 — <code>scope</code>, <code>ui</code></li> <li>What changed: Added CIHR as a tracked source; improved “archived, not current guidance” banner on browse pages.</li> <li>Why: Expand annual campaign scope within single-VPS limits; reduce misinterpretation risk in browse mode.</li> <li>Notes: CIHR capture coverage is early-stage; some interactive content may not replay fully.</li> </ul> <p>Example entry (reliability + ops):</p> <ul> <li>2026-03-01 — <code>ops</code>, <code>reliability</code></li> <li>What changed: Added monthly search-verification artifact generation; clarified restore test cadence in ops docs.</li> <li>Why: Improve verifiability and reduce “silent failure” risk.</li> </ul> <hr> <h2 id=appendix-e-report-an-issue-categories-fields>Appendix E — “Report an Issue”: Categories + Fields</h2> <p>This is intentionally designed to be implementable as a simple page + email/GitHub workflow first.</p> <p><strong>Suggested report categories (keep it small):</strong></p> <ul> <li>Broken snapshot viewer (raw HTML fails, replay fails, blank iframe)</li> <li>Wrong metadata (source, capture date, title, URL)</li> <li>Missing content (expected page not present / coverage gap)</li> <li>Corrections request (labeling, context, clarification)</li> <li>Takedown / opt-out request</li> <li>Suggest a source / scope request</li> </ul> <p><strong>What info to ask for (so reports are actionable):</strong></p> <ul> <li>Snapshot link (preferred) or snapshot ID</li> <li>Original URL</li> <li>What you expected to see vs what happened</li> <li>Screenshot (optional)</li> <li>Contact email (optional)</li> <li>“This is urgent because…” (optional)</li> </ul> <p><strong>Response expectations (examples):</strong></p> <ul> <li>Acknowledge within 7 days.</li> <li>Urgent safety labeling issues: acknowledge within 48 hours.</li> <li>If not fixable (capture didn’t include required assets), respond with a clear explanation.</li> </ul> <hr> <h2 id=appendix-f-governance-page-recommended-outline>Appendix F — Governance Page: Recommended Outline</h2> <p>This is a suggested structure for <code>/governance</code> that is “public-interest service” readable but still accurate to the implementation.</p> <p>1) <strong>Mission</strong> - 2–3 sentence mission statement. - Explicit “not medical advice / not current guidance / independent project.”</p> <p>2) <strong>Scope</strong> - What sources are currently included (list source codes and names). - What is explicitly out of scope (private/user-submitted content, PHI, unrelated domains). - Why scope is constrained (reliability, storage, single-VPS reality).</p> <p>3) <strong>How captures work (high-level)</strong> - Time-stamped crawls produce standards-based web archive formats (WARCs). - Snapshots are indexed into a database to support search and citation. - Replay (if enabled) provides higher fidelity browsing but depends on captured assets.</p> <p>4) <strong>Provenance commitments (what the project guarantees)</strong> - Capture timestamp and original URL are displayed. - Snapshots are tied back to WARC-backed storage. - Content hashes exist to detect change (at minimum, internal integrity checks).</p> <p>5) <strong>Corrections</strong> - What can be corrected (metadata, labeling, broken links, UX bugs). - What cannot always be corrected (missing assets in the captured WARC). - Response expectations and how to submit.</p> <p>6) <strong>Takedown / opt-out</strong> - Who can request (rights holders, site owners, etc.). - What you need to evaluate a request. - Possible outcomes (remove access, limit distribution, add context).</p> <p>7) <strong>Transparency</strong> - Aggregate reporting: number of takedown requests, number of correction requests, general outcomes. - Link to changelog and monthly impact reports.</p> <p>8) <strong>Advisory</strong> - Advisory charter + cadence + published members (with permission).</p> <p>9) <strong>Contact</strong> - Link to <code>/report</code> and <code>/contact</code>.</p> <hr> <h2 id=appendix-g-change-tracking-implementation-decisions-to-resolve-before-building>Appendix G — Change Tracking: Implementation Decisions to Resolve (before building)</h2> <p>The Phase 3 work can balloon if decisions aren’t made early. This list is meant to force clarity before coding.</p> <p><strong>Core questions</strong></p> <p>1) What is the unit of change? - Page group (<code>normalized_url_group</code>) is the natural unit, because it already exists and supports “timeline” thinking.</p> <p>2) What snapshots are compared? - “Latest vs previous” per page group is a simple default. - Consider how to handle missing/failed captures and non-2xx results.</p> <p>3) What constitutes a “meaningful change”? - Minimal viable: content hash changed → record as “changed”. - Next: generate a noise-reduced text diff and highlight changed sections.</p> <p>4) Where is diff generation run? - Must be off the user request path. - Should be scheduled or triggered after indexing, with throttling and failure handling.</p> <p>5) How will you label confidence/noise? - Some pages will produce noisy diffs; the UI should communicate that.</p> <p><strong>Outputs you should be able to support</strong></p> <ul> <li>Page timeline: list of capture points for a page group</li> <li>Compare view: two selected captures with a descriptive diff</li> <li>Changes feed: list of recent change events</li> <li>Digest: weekly view of top changes + “coverage notes”</li> </ul> <hr> <h2 id=appendix-h-digest-web-rss-content-structure-example>Appendix H — Digest (Web + RSS): Content Structure Example</h2> <p>Keep it simple, descriptive, and consistent week-to-week.</p> <p>Suggested weekly digest sections:</p> <ul> <li><strong>Summary</strong></li> <li>“During this period, X pages changed across Y sources.”</li> <li>“Z new pages were discovered; W pages were removed/redirected.”</li> <li><strong>Top changes</strong></li> <li>A list of the top N changes with:<ul> <li>source</li> <li>page title / URL</li> <li>capture dates compared</li> <li>“changed sections” count or “diff size” proxy</li> <li>link to compare view</li> </ul> </li> <li><strong>New pages</strong></li> <li>Pages that appeared for the first time in the archive (new page group)</li> <li><strong>Removed/redirected pages</strong></li> <li>Pages that disappeared or became unreachable (if detectable)</li> <li><strong>Coverage notes</strong></li> <li>“PHAC crawl had partial capture of X path; expect gaps.”</li> </ul> <p>RSS guidance:</p> <ul> <li>Keep RSS item titles descriptive and non-editorial (“PHAC: <page title> changed (2026-02-01 → 2026-02-08)”).</li> <li>Include the “not medical advice / not current guidance” disclaimer in the RSS item body or feed description.</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jerdaw/healtharchive-backend target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://twitter.com/healtharchive target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.expand", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>